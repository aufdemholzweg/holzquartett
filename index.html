<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holz-Quartett</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
        }
        
        .card-3d {
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        
        .card-flipped {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .card-back {
            transform: rotateY(180deg);
        }
        
        .wood-texture {
            background: linear-gradient(45deg, #8B4513 25%, transparent 25%), 
                        linear-gradient(-45deg, #8B4513 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #8B4513 75%), 
                        linear-gradient(-45deg, transparent 75%, #8B4513 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            background-color: #D2B48C;
            opacity: 0.1;
        }
        
        .pulse-win {
            animation: pulse-green 0.8s ease-in-out;
        }
        
        .pulse-lose {
            animation: pulse-red 0.8s ease-in-out;
        }

        .animate-pop-in {
            animation: pop-in 0.5s ease-out forwards;
        }
        
        @keyframes pop-in {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }

        @keyframes pulse-green {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
        }
        
        @keyframes pulse-red {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 to-orange-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b-2 border-amber-200">
        <div class="max-w-6xl mx-auto px-4 py-3">
            <h1 class="text-2xl font-bold text-amber-800 text-center">üå≥ Holz-Quartett</h1>
        </div>
    </header>

    <!-- Game Setup Modal -->
    <div id="setupModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-amber-800 mb-6 text-center">Spiel starten</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Dein Name:</label>
                    <input type="text" id="playerName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Spielername eingeben">
                </div>
                <button onclick="startGame()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                    üéÆ Spiel starten
                </button>
            </div>
        </div>
    </div>

    <!-- Game Container -->
    <div id="gameContainer" class="hidden max-w-6xl mx-auto px-1 py-4">
        <!-- Score & Status Panel -->
        <div class="max-w-md mx-auto mb-6 space-y-3">
            <div class="flex justify-center gap-3">
                <!-- Player Score Box -->
                <div class="w-1/2 bg-white rounded-xl shadow-lg p-3 text-center">
                    <p id="playerNameDisplay" class="text-lg font-bold text-amber-600 truncate"></p>
                    <p class="text-sm text-gray-500">Karten: <span id="playerCards" class="font-semibold">15</span></p>
                </div>
                <!-- AI Score Box -->
                <div class="w-1/2 bg-white rounded-xl shadow-lg p-3 text-center">
                    <p class="text-lg font-bold text-red-600">Computer</p>
                    <p class="text-sm text-gray-500">Karten: <span id="aiCards" class="font-semibold">15</span></p>
                </div>
            </div>
            <!-- Status Bar -->
            <div class="w-full bg-gray-200 rounded-full h-3 relative overflow-hidden border border-gray-300">
                <div id="statusBar" class="bg-amber-500 h-full rounded-l-full transition-all duration-500" style="width: 50%;"></div>
                 <div class="absolute inset-0 flex justify-center items-center">
                    <div class="w-0.5 h-full bg-white opacity-75"></div>
                </div>
            </div>
        </div>


        <!-- Game Board -->
        <div class="flex justify-center gap-2 sm:gap-2 mb-6 max-w-md mx-auto">
            <!-- Player Card -->
            <div class="text-center w-1/2">
                <div id="playerCard" class="relative aspect-[20/36] perspective-1000">
                    <!-- Card content will be inserted here -->
                </div>
            </div>

            <!-- AI Card -->
            <div class="text-center w-1/2">
                <div id="aiCard" class="relative aspect-[20/36] perspective-1000">
                    <!-- Card content will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Action Panel -->
        <div class="bg-white rounded-xl shadow-lg p-4 mt-6 text-center mx-auto flex flex-col items-center justify-center" style="max-width: 435px;">
            <div id="attributeSelection" class="">
                 <h3 class="text-lg font-semibold text-gray-700">W√§hle eine Eigenschaft!</h3>
            </div>
            <div id="nextRoundButton" class="hidden w-full mb-2">
                 <button onclick="nextRound()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-8 rounded-lg transition-colors">
                     ‚û°Ô∏è N√§chster Zug
                 </button>
             </div>
            <div id="resultDisplay" class="hidden">
                 <h3 id="resultText" class="text-xl font-bold mb-1"></h3>
                 <p id="resultDetails" class="text-sm text-gray-600"></p>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl text-center">
            <h2 id="gameOverTitle" class="text-3xl font-bold mb-4"></h2>
            <p id="gameOverText" class="text-gray-600 mb-6"></p>
            <div class="space-y-3">
                <button onclick="showLeaderboard()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                    üèÜ Bestenliste anzeigen
                </button>
                <button onclick="resetGame()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                    üîÑ Neues Spiel
                </button>
            </div>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-amber-800 mb-6 text-center">üèÜ Bestenliste</h2>
            <div id="leaderboardList" class="space-y-2 mb-6">
                <!-- Leaderboard entries will be inserted here -->
            </div>
            <button onclick="closeLeaderboard()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                Schlie√üen
            </button>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 px-4">
        <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4 shadow-2xl relative">
            <button onclick="closeInfoModal()" class="absolute top-2 right-3 text-2xl text-gray-400 hover:text-gray-600">&times;</button>
            <h2 id="infoModalTitle" class="text-2xl font-bold text-amber-800 mb-4">Wissenswertes</h2>
            <div id="infoModalContent" class="text-gray-700 space-y-4 max-h-[60vh] overflow-y-auto">
                <!-- Info content will be inserted here -->
            </div>
        </div>
    </div>
        // Game data
        const woodCards = [
            {name: "Eiche", dk: 2, haerte: 85, quellenSchwindenRadial: 4.0, dichte: 650, gewicht: 12000},
            {name: "Buche", dk: 5, haerte: 80, quellenSchwindenRadial: 5.8, dichte: 720, gewicht: 14000},
            {name: "Kiefer", dk: 3, haerte: 40, quellenSchwindenRadial: 3.5, dichte: 520, gewicht: 11000},
            {name: "Fichte", dk: 4, haerte: 35, quellenSchwindenRadial: 3.6, dichte: 450, gewicht: 11000},
            {name: "Tanne", dk: 4, haerte: 38, quellenSchwindenRadial: 3.5, dichte: 460, gewicht: 10000},
            {name: "L√§rche", dk: 3, haerte: 55, quellenSchwindenRadial: 3.7, dichte: 590, gewicht: 12000},
            {name: "Birke", dk: 5, haerte: 60, quellenSchwindenRadial: 5.4, dichte: 650, gewicht: 13000},
            {name: "Ahorn", dk: 5, haerte: 75, quellenSchwindenRadial: 4.8, dichte: 630, gewicht: 12500},
            {name: "Esche", dk: 5, haerte: 90, quellenSchwindenRadial: 4.9, dichte: 700, gewicht: 13000},
            {name: "Kirsche", dk: 3, haerte: 70, quellenSchwindenRadial: 4.0, dichte: 600, gewicht: 11500},
            {name: "Nussbaum", dk: 3, haerte: 65, quellenSchwindenRadial: 4.0, dichte: 640, gewicht: 12000},
            {name: "Douglasie", dk: 3, haerte: 45, quellenSchwindenRadial: 3.5, dichte: 510, gewicht: 12000},
            {name: "Zeder", dk: 2, haerte: 42, quellenSchwindenRadial: 2.8, dichte: 480, gewicht: 9500},
            {name: "Mahagoni", dk: 2, haerte: 55, quellenSchwindenRadial: 3.0, dichte: 550, gewicht: 10500},
            {name: "Teak", dk: 1, haerte: 60, quellenSchwindenRadial: 2.5, dichte: 650, gewicht: 11000},
            {name: "Bambus", dk: 4, haerte: 50, quellenSchwindenRadial: 3.0, dichte: 400, gewicht: 18000},
            {name: "Pappel", dk: 5, haerte: 25, quellenSchwindenRadial: 4.5, dichte: 380, gewicht: 9000},
            {name: "Weide", dk: 5, haerte: 30, quellenSchwindenRadial: 4.0, dichte: 420, gewicht: 8000},
            {name: "Linde", dk: 5, haerte: 35, quellenSchwindenRadial: 3.8, dichte: 530, gewicht: 9000},
            {name: "Ulme", dk: 3, haerte: 75, quellenSchwindenRadial: 4.5, dichte: 680, gewicht: 11500},
            {name: "Kastanie", dk: 2, haerte: 50, quellenSchwindenRadial: 3.5, dichte: 600, gewicht: 10000},
            {name: "Robinie", dk: 1, haerte: 80, quellenSchwindenRadial: 3.0, dichte: 730, gewicht: 15000},
            {name: "Hemlock", dk: 4, haerte: 40, quellenSchwindenRadial: 3.6, dichte: 500, gewicht: 10000},
            {name: "Zypresse", dk: 2, haerte: 48, quellenSchwindenRadial: 3.0, dichte: 520, gewicht: 9000},
            {name: "Redwood", dk: 2, haerte: 35, quellenSchwindenRadial: 2.8, dichte: 400, gewicht: 8500},
            {name: "H hickory", dk: 3, haerte: 95, quellenSchwindenRadial: 5.5, dichte: 750, gewicht: 14000},
            {name: "Wenge", dk: 2, haerte: 88, quellenSchwindenRadial: 3.8, dichte: 880, gewicht: 16000},
            {name: "Zebrano", dk: 3, haerte: 70, quellenSchwindenRadial: 4.0, dichte: 750, gewicht: 13000},
            {name: "Palisander", dk: 2, haerte: 82, quellenSchwindenRadial: 3.0, dichte: 850, gewicht: 16000},
            {name: "Ebony", dk: 1, haerte: 98, quellenSchwindenRadial: 3.2, dichte: 1200, gewicht: 16500}
        ];
        
        // NEU: Lokale Informationen f√ºr jede Holzart
        // Hier k√∂nnen Sie Ihre eigenen Texte eintragen.
        const woodInfo = {
          "Eiche": {
            info: `Eiche (QE) Die Eiche z√§hlt zu den bedeutendsten heimischen Laubh√∂lzern Europas. Ihr Holz ist hart, schwer und sehr dauerhaft, was sie zu einem bevorzugten Werkstoff im Innen‚Äë und Au√üenbereich macht. Besonders charakteristisch sind die hohen Gerbstoffanteile, die das Holz widerstandsf√§hig gegen Pilze und Sch√§dlinge machen ‚Äì gleichzeitig k√∂nnen sie beim Kontakt mit Eisen zu Verf√§rbungen f√ºhren. Eichenholz ist grobporig und zeigt einen deutlichen √úbergang zwischen Fr√ºh- und Sp√§tholz, wodurch die Jahresringe klar sichtbar sind. Diese ausgepr√§gte Maserung sorgt f√ºr eine markante, lebendige Optik. Verwendung: M√∂bel, Fu√üb√∂den, Treppen, Fassdauben (z.‚ÄØB. f√ºr Weinf√§sser), Schiffbau, Terrassen, Br√ºcken, Fachwerk. Funfact: Bereits in der Antike galt die Eiche als Symbol f√ºr St√§rke und Best√§ndigkeit ‚Äì sie ziert bis heute zahlreiche Wappen und M√ºnzen.`,
            bildBaum: "https://www.schreiner-seiten.de/holzarten/eiche.php#images-2",
            bildQuerschnitt: "https://www.gdholz.net/images/holzarten/063a-weisseiche-1.jpg"
          },
          "Buche": {
            info: `Buche (BU) Die Buche ist ein gleichm√§√üig strukturiertes Hartholz heimischer W√§lder. Ihr Holz ist z√§h, biegsam und relativ harzarm, wodurch es sich sehr gut f√ºr M√∂bel und Parkett eignet. Buchenholz ist ringporig mit mittelgro√üen Poren im Fr√ºhholz und dichterem Sp√§tholz, sodass die √úberg√§nge dezent sichtbar sind ‚Äì die Jahresringe sind gut erkennbar, aber nicht grob. Verwendung: M√∂bel, Parkett, Furniere, Sperrholz, Innenausbau. Funfact: Buchenholz war lange Zeit typisch f√ºrs Wagenrad ‚Äì wegen seiner Kombination aus Z√§higkeit und Elastizit√§t.`,
            bildBaum: "https://Beispielbild-verlinken.de/buche_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/buche_querschnitt.jpg"
          },
          "Kiefer": {
            info: `Kiefer (KI) Kiefer ist ein weit verbreitetes Nadelholz mit markanter Jahresringstruktur. Es ist weich, harzhaltig und relativ leicht zu bearbeiten. Das Holz zeigt keine ausgepr√§gten gro√üen Poren wie Laubh√∂lzer, sondern eine eher gleichm√§√üige Zellstruktur ‚Äì Jahresringe und Harzkan√§le sind sichtbar. Verwendung: Bauholz, Dachst√ºhle, Innenausbau, M√∂bel, Paneele. Funfact: Kiefernharz wurde fr√ºher als Klebstoff oder als Bestandteil von Salben und Dichtungsmaterialien verwendet.`,
            bildBaum: "https://Beispielbild-verlinken.de/kiefer_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/kiefer_querschnitt.jpg"
          },
          "Fichte": {
            info: `Fichte (FI) Fichte ist ein klassisches Bauholz mit guter Festigkeit bei geringem Gewicht. Es l√§sst sich leicht bearbeiten und vielfach einsetzen. Das Holz weist eine feine Zellstruktur auf, ohne gro√üe Poren ‚Äì Jahresringe sind erkennbar, aber nicht grob. Verwendung: Bauholz, Innenverkleidung, Dach, M√∂bel, Paneele. Funfact: In vielen Gebirgsregionen war Fichtenholz √ºber Jahrhunderte hinweg der Standard f√ºr Dachkonstruktionen und S√§gewerke.`,
            bildBaum: "https://Beispielbild-verlinken.de/fichte_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/fichte_querschnitt.jpg"
          },
          "Tanne": {
            info: `Tanne (TA) Tanne ist ein harzarmes, vergleichsweise feines Nadelholz, das oft als Alternative zur Fichte verwendet wird. Die Struktur √§hnelt der Fichte: feine Fasern, dezente Jahresringe, keine ausgepr√§gten Poren. Verwendung: Innenausbau, M√∂bel, Paneele, Bauholz. Funfact: Da Tanne weniger Harz enth√§lt, ist sie angenehmer in R√§umen einzusetzen, da sie weniger Geruch abgibt.`,
            bildBaum: "https://Beispielbild-verlinken.de/tanne_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/tanne_querschnitt.jpg"
          },
          "L√§rche": {
            info: `L√§rche (LA) L√§rche ist bekannt f√ºr ihre nat√ºrliche Witterungsbest√§ndigkeit und sch√∂ne Farbe. Sie kombiniert Elastizit√§t mit Festigkeit. Das Holz zeigt ausgepr√§gte Jahresringe und Harzkan√§le ‚Äì die Struktur ist deutlich sichtbar. Verwendung: Fassadenholz, Fenster, Terrassen, Au√üenbau, M√∂bel. Funfact: L√§rchenholz wird h√§ufig ohne chemische Behandlung im Au√üenbereich eingesetzt und erh√§lt mit der Zeit eine edle Vergrauung.`,
            bildBaum: "https://Beispielbild-verlinken.de/laerche_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/laerche_querschnitt.jpg"
          },
          "Birke": {
            info: `Birke (BI) Birke ist ein helles, dekoratives Holz mit feiner, gleichm√§√üiger Struktur. Es √ºberzeugt durch gute Biegsamkeit. Das Holz ist zerstreutporig ‚Äì Poren sind fein verteilt, ohne gro√üe Unterschiede zwischen Fr√ºh- und Sp√§tholz. Verwendung: M√∂bel, Furniere, Sperrholz, Innenausbau. Funfact: Birkenrinde wurde fr√ºher als wasserabweisendes Material f√ºr Beh√§lter und Boote genutzt.`,
            bildBaum: "https://Beispielbild-verlinken.de/birke_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/birke_querschnitt.jpg"
          },
          "Ahorn": {
            info: `Ahorn (AM) Ahorn ist hart, hell und elegant ‚Äì ideal f√ºr feine M√∂bel, Instrumente und Designanwendungen. Es handelt sich ebenfalls um ein zerstreutporiges Holz mit gleichm√§√üiger Porenverteilung, ohne starke √úberg√§nge zwischen Fr√ºh‚Äë und Sp√§tholz. Verwendung: M√∂bel, Parkett, Instrumente, Schneidebretter. Funfact: Aus Ahorn gewinnt man auch Ahornsirup ‚Äì allerdings aus nordamerikanischen Arten, nicht unbedingt jene zum M√∂belbau.`,
            bildBaum: "https://Beispielbild-verlinken.de/ahorn_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/ahorn_querschnitt.jpg"
          },
          "Esche": {
            info: `Esche (ES) Die Esche ist ein besonders z√§hes, elastisches Holz mit hoher Festigkeit. Sie zeigt ringporige Struktur mit deutlich sichtbaren Poren im Fr√ºhholz und schmaleren Poren im Sp√§tholz. Verwendung: Werkzeugstiele, Sportger√§te, M√∂bel, Parkett, Innenausbau. Funfact: In der Antike wurden Wagenr√§der und Speichen h√§ufig aus Esche gefertigt ‚Äì wegen ihrer elastischen Eigenschaften.`,
            bildBaum: "https://Beispielbild-verlinken.de/esche_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/esche_querschnitt.jpg"
          },
          "Kirsche": {
            info: `Kirsche (KR) Kirschbaumholz besitzt warme rote T√∂ne, die mit Licht nachdunkeln, und eine edle Struktur. Ringporig mit deutlichem √úbergang zwischen Fr√ºh- und Sp√§tholz ‚Äì Jahresringe sind gut sichtbar. Verwendung: M√∂bel, Furniere, Innenausbau, Dekor. Funfact: Kirschholz wird oft in M√∂beln verwendet, die mit der Zeit ‚Äúreifer‚Äù aussehen ‚Äì die Farbe verbessert sich mit Alterung.`,
            bildBaum: "https://Beispielbild-verlinken.de/kirsche_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/kirsche_querschnitt.jpg"
          },
          "Nussbaum": {
            info: `Nussbaum (NU) Nussbaumholz ist dunkel, dekorativ und sehr hochwertig. Das Kernholz hat oft starken Farbkontrast zum Splintholz. Es ist zerstreutporig ‚Äì Poren sind fein √ºber die Fl√§che verteilt, oft mit dekorativen Maserungen. Verwendung: M√∂bel, Furniere, Intarsien, edle Ausstattungen. Funfact: Walnuss (Nussbaum) war schon in der Renaissance sehr gesch√§tzt und zierte viele k√∂nigliche M√∂belst√ºcke.`,
            bildBaum: "https://Beispielbild-verlinken.de/nussbaum_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/nussbaum_querschnitt.jpg"
          },
          "Douglasie": {
            info: `Douglasie (DO) Douglasienholz ist robust, witterungsbest√§ndig und h√§ufig im Au√üenbau eingesetzt. Die Struktur ist klar erkennbar ‚Äì deutliche Jahresringe mit Transition zwischen Fr√ºh‚Äë und Sp√§tholz. Verwendung: Bauholz, Fassaden, Dach, M√∂bel im Au√üenbereich. Funfact: Die Douglasie stammt urspr√ºnglich aus Nordamerika, ist aber auch in Europa weit verbreitet und wird gro√ügezogen.`,
            bildBaum: "https://Beispielbild-verlinken.de/douglasie_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/douglasie_querschnitt.jpg"
          },
          "Zeder": {
            info: `Zeder (ZE) Zedernholz duftet angenehm und besitzt von Natur aus eine Resistenz gegen Insektenbefall und Feuchtigkeit. Die Struktur ist fein mit gleichm√§√üigen Poren ‚Äì kein starker Kontrast zwischen Fr√ºh- und Sp√§tholz. Verwendung: M√∂bel, Fassaden, Innenraum, Schr√§nke. Funfact: Zedernholz wird oft in Kleiderschr√§nken eingesetzt, weil es den unverwechselbaren Duft und Insektenabwehr besitzt.`,
            bildBaum: "https://Beispielbild-verlinken.de/zeder_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/zeder_querschnitt.jpg"
          },
          "Mahagoni": {
            info: `Mahagoni (MA) Mahagoni ist ein tropisches Edelholz mit hoher Dauerhaftigkeit und edler Farbe. Es ist zerstreutporig ‚Äì Poren gleichm√§√üig verteilt und oft mit dekorativer Kernholzstruktur. Verwendung: M√∂bel, Fenster, Luxusausstattung, Bootsbau. Funfact: In manchen L√§ndern ist Mahagoni wegen seiner Seltenheit streng reguliert und unterliegt Artenschutzbestimmungen.`,
            bildBaum: "https://Beispielbild-verlinken.de/mahagoni_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/mahagoni_querschnitt.jpg"
          },
          "Teak": {
            info: `Teak (TE) Teak ist extrem witterungsbest√§ndig durch hohen √ñl- und Harzgehalt ‚Äì ideal f√ºr Au√üenm√∂bel und Schiffsbau. Die Struktur ist fein zerstreutporig, mit dekorativem Erscheinungsbild und gleichm√§√üiger Porenverteilung. Verwendung: Gartenm√∂bel, Terrassen, Boote, Fenster, Au√üenbereich. Funfact: Teakholz war fr√ºher f√ºr den Bau von Kriegsschiffen sehr gefragt wegen seiner Dauerhaftigkeit und Wasserbest√§ndigkeit.`,
            bildBaum: "https://Beispielbild-verlinken.de/teak_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/teak_querschnitt.jpg"
          },
          "Bambus": {
            info: `Bambus (BA) Bambus ist botanisch gesehen kein Holz, sondern ein Gras ‚Äì dennoch extrem stabil und vielseitig verwendbar. Die Struktur ist r√∂hrenartig und weist keine klassischen Poren wie Harth√∂lzer auf. Verwendung: Fu√üb√∂den, M√∂bel, Treppen, nachhaltiger Bau. Funfact: Bambus w√§chst so schnell, dass einzelne Stangen innerhalb weniger Monate √ºber einen Meter wachsen k√∂nnen.`,
            bildBaum: "https://Beispielbild-verlinken.de/bambus_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/bambus_querschnitt.jpg"
          },
          "Pappel": {
            info: `Pappel (PA) Pappelholz ist sehr leicht und weich ‚Äì weniger tragf√§hig, aber gut bearbeitbar. Feine Struktur, fast keine gro√üen Poren ‚Äì Jahresringe nur dezent sichtbar. Verwendung: Leichtbau, Verpackungen, M√∂bel mit geringer Belastung. Funfact: Pappelholz wird oft f√ºr Modellbau oder Flugzeuginnenr√§ume verwendet, wo Leichtigkeit z√§hlt.`,
            bildBaum: "https://Beispielbild-verlinken.de/pappel_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/pappel_querschnitt.jpg"
          },
          "Weide": {
            info: `Weide (WE) Weidenholz ist elastisch und biegsam ‚Äì traditionell f√ºr Flechtarbeiten und K√∂rbe verwendet. Die Struktur ist fein zerstreutporig, Poren kaum markant. Verwendung: Flechtwerk, Gartenbau, leichte M√∂bel. Funfact: Weidenruten werden seit Jahrhunderten f√ºr Korbgeflechte, Z√§une und Rankhilfen genutzt.`,
            bildBaum: "https://Beispielbild-verlinken.de/weide_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/weide_querschnitt.jpg"
          },
          "Linde": {
            info: `Linde (LI) Lindenholz ist weich, homogen und gut schnitzbar ‚Äì ideal f√ºr feine Holzarbeiten. Fein zerstreutporig und gleichm√§√üig, ohne gro√üen Porenkontrast. Verwendung: Intarsien, geschnitzte Dekors, M√∂bel, Modellbau. Funfact: Lindenholz war traditionell das Holz der Bildhauer und Orgelbauer im Mittelalter.`,
            bildBaum: "https://Beispielbild-verlinken.de/linde_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/linde_querschnitt.jpg"
          },
          "Ulme": {
            info: `Ulme (UL) Ulmenholz ist z√§h und eher hart ‚Äì fr√ºher oft f√ºr M√∂bel und Reparaturen verwendet. Ringporig mit markanten Poren und gelegentlichem unruhigem Faserverlauf. Verwendung: M√∂bel, Innenausbau, Reparaturholz. Funfact: Ulmenholz hat fr√ºher im Wagen- und M√∂belbau Bedeutung gehabt, besonders dort, wo Biegung gefragt war.`,
            bildBaum: "https://Beispielbild-verlinken.de/ulme_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/ulme_querschnitt.jpg"
          },
          "Kastanie": {
            info: `Kastanie (KA) Kastanienholz ist √§hnlich der Eiche wetterbest√§ndig, mit warmem Farbton und markanter Struktur. Ringporig mit klar sichtbaren Jahresringen und deutlichem √úbergang. Verwendung: Au√üenbau, M√∂bel, Balken, Gartenholz. Funfact: Kastanienholz wurde oft in historischen Bauwerken als wetterbest√§ndige Alternative zur Eiche verwendet.`,
            bildBaum: "https://Beispielbild-verlinken.de/kastanie_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/kastanie_querschnitt.jpg"
          },
          "Robinie": {
            info: `Robinie (RO) Robinienholz ist eines der h√§rtesten europ√§ischen H√∂lzer und sehr dauerhaft im Freien. Ringporig mit feinen Poren und schmalem √úbergang ‚Äì die Struktur ist weniger kontrastreich. Verwendung: Gartenholz, Terrassen, Balken, Z√§une. Funfact: Robinie wird oft als ‚Äûeurop√§isches Teak‚Äú genannt, weil es √§hnliche Eigenschaften wie Tropenholz zeigt.`,
            bildBaum: "https://Beispielbild-verlinken.de/robinie_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/robinie_querschnitt.jpg"
          },
          "Hemlock": {
            info: `Hemlock (HE) Hemlock ist ein n√∂rdliches Nadelholz mit feiner Struktur, weich und gleichm√§√üig. Die Porenstruktur √§hnelt einfacher Zellstruktur; Jahresringe dezent sichtbar. Verwendung: Innenausbau, Paneele, Bauholz. Funfact: Hemlock wird oft im M√∂bel- und Leichtbau verwendet, wenn gutes Verh√§ltnis zwischen Gewicht und Stabilit√§t gefragt ist.`,
            bildBaum: "https://Beispielbild-verlinken.de/hemlock_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/hemlock_querschnitt.jpg"
          },
          "Zypresse": {
            info: `Zypresse (ZY) Zypressenholz duftet gut und ist nat√ºrlich resistent gegen Feuchtigkeit und Sch√§dlinge. Die Struktur ist fein und gleichm√§√üig, mit moderatem Porencharakter. Verwendung: Au√üen- und Gartenholz, M√∂bel, Fassaden. Funfact: Zypresse wurde in mediterranen Regionen oft zur Holzverkleidung von Kirchen und Tempeln verwendet.`,
            bildBaum: "https://Beispielbild-verlinken.de/zypresse_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/zypresse_querschnitt.jpg"
          },
          "Redwood": {
            info: `Redwood (RW) Redwood ist ein leichtes Tropenholz mit guter Dauerhaftigkeit und dekorativer Farbe. Zerstreutporig mit feiner Textur, Poren gleichm√§√üig verteilt. Verwendung: Au√üenholz, Z√§une, Gartenkonstruktionen. Funfact: Der K√ºstenmammutbaum (Redwood) z√§hlt zu den h√∂chsten B√§umen der Welt.`,
            bildBaum: "https://Beispielbild-verlinken.de/redwood_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/redwood_querschnitt.jpg"
          },
          "H hickory": {
            info: `Hickory (HI) Hickory ist ein ausgesprochen z√§hes und hartes Holz ‚Äì ideal f√ºr stark beanspruchte Teile. Ringporig mit ausgepr√§gten Poren im Fr√ºhholz und klaren Jahresringen. Verwendung: Werkzeugstiele, Sportger√§te, M√∂bel mit hoher Belastung. Funfact: Hickory war traditionell Material f√ºr Peitschen, Wurfst√∂cke und Arbeitsger√§te.`,
            bildBaum: "https://Beispielbild-verlinken.de/hickory_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/hickory_querschnitt.jpg"
          },
          "Wenge": {
            info: `Wenge (WE-NE) Wenge ist ein dunkles Tropenholz mit hoher H√§rte und dekorativer Maserung. Zerstreutporig mit feinen Poren ‚Äì oft Streifenzeichnung sichtbar. Verwendung: Luxusm√∂bel, Parkett, Furniere. Funfact: Wegen seiner tiefen, dunklen Farbe wird Wenge oft in Kontrasten zu hellem Holz kombiniert.`,
            bildBaum: "https://Beispielbild-verlinken.de/wenge_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/wenge_querschnitt.jpg"
          },
          "Zebrano": {
            info: `Zebrano (ZE-RA) Zebrano zeichnet sich durch seine markante Streifenoptik aus ‚Äì dekorativ und auff√§llig. Die Porenstruktur ist zerstreutporig, oft mit deutlichem Maserungseffekt. Verwendung: Designm√∂bel, Furniere, Dekorationen. Funfact: Zebrano wird oft f√ºr luxuri√∂se Intarsien und Furnierarbeiten verwendet.`,
            bildBaum: "https://Beispielbild-verlinken.de/zebrano_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/zebrano_querschnitt.jpg"
          },
          "Palisander": {
            info: `Palisander (PA) Palisanderholz ist dekorativ, fest und langlebig ‚Äì mit attraktiven Farbt√∂nen. Zerstreutporig mit feiner Struktur und gleichm√§√üiger Porenverteilung. Verwendung: Gitarren, M√∂bel, Furniere. Funfact: Palisanderholz war fr√ºher oft exklusiv f√ºr edle Musikinstrumente und Intarsien reserviert.`,
            bildBaum: "https://Beispielbild-verlinken.de/palisander_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/palisander_querschnitt.jpg"
          },
          "Ebony": {
            info: `Ebony (EB) Ebenholz ist eines der h√§rtesten H√∂lzer ‚Äì fast tiefschwarz und sehr dicht. Zerstreutporig mit extrem feinen Poren, kaum sichtbar ‚Äì Porenstruktur sehr fein. Verwendung: Klaviertasten, Intarsien, Luxusdekore. Funfact: Ebenholz wurde im alten √Ñgypten f√ºr Statuetten und Schmuckst√ºcke verwendet ‚Äì wegen seiner tiefen Farbe und Seltenheit.`,
            bildBaum: "https://Beispielbild-verlinken.de/ebony_baum.jpg",
            bildQuerschnitt: "https://Beispielbild-verlinken.de/ebony_querschnitt.jpg"
          }
        };


        // Game state
        let gameState = {
            playerName: '',
            playerCards: [],
            aiCards: [],
            currentPlayerCard: null,
            currentAiCard: null,
            playerTurn: true,
            gameOver: false,
            roundResult: null,
            roundInProgress: false
        };

        // Attribute icons and names
        const attributeInfo = {
            dk: {icon: 'üõ°Ô∏è', name: 'Dauerhaftigkeit(DK)', color: 'blue'},
            haerte: {icon: 'üíé', name: 'Druckfestigkeit(N/mm¬≤)', color: 'blue'},
            quellenSchwindenRadial: {icon: '‚ÜîÔ∏è', name: 'Quellen/Schwinden(%)', color: 'blue'},
            dichte: {icon: '‚öñÔ∏è', name: 'Rohdichte(kg/m¬≥)', color: 'blue'},
            gewicht: {icon: 'üèãÔ∏è', name: 'EModul(N/mm¬≤)', color: 'blue'}
        };

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startGame() {
            const playerName = document.getElementById('playerName').value.trim();
            if (!playerName) {
                alert('Bitte gib deinen Namen ein!');
                return;
            }

            gameState.playerName = playerName;
            document.getElementById('playerNameDisplay').textContent = playerName;

            // Shuffle and distribute cards
            const shuffledCards = shuffleArray(woodCards);
            gameState.playerCards = shuffledCards.slice(0, 15);
            gameState.aiCards = shuffledCards.slice(15, 30);

            // Set current cards
            gameState.currentPlayerCard = gameState.playerCards[0];
            gameState.currentAiCard = gameState.aiCards[0];

            // Show game
            document.getElementById('setupModal').classList.add('hidden');
            document.getElementById('gameContainer').classList.remove('hidden');

            updateDisplay();
            displayCards();
        }

        function createCard(cardData, isRevealed = true, isPlayer = true) {
            const card = document.createElement('div');
            card.className = `card-3d w-full h-full relative cursor-pointer transition-all duration-300 ${isPlayer ? 'hover-lift' : ''}`;
            
            if (!isRevealed) {
                card.classList.add('card-flipped');
            }

            // Card front (revealed)
            const cardFront = document.createElement('div');
            cardFront.className = `card-front bg-white rounded-xl shadow-lg border-2 border-amber-200 p-3 flex flex-col`;
            
            const isPlayerCard = isPlayer && isRevealed;

            const infoButtonHTML = isPlayerCard ? `
                <button id="player-info-button" onclick="showWoodInfo()" class="hidden bg-purple-600 text-white rounded-full h-6 w-6 flex-shrink-0 flex items-center justify-center text-xs hover:bg-purple-700">
                    ‚ú®
                </button>
            ` : '';

            const attributeButtons = isPlayer ? `
                <div class="space-y-1 mt-auto">
                    <button onclick="selectAttribute('dk')" class="w-full flex justify-between items-center py-1 px-0.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors cursor-pointer text-left">
                        <div class="flex items-center">
                            <span class="mr-2 text-xs">üõ°Ô∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Dauerhaftigkeit</span>
                                <span class="block text-xs text-gray-500 leading-tight">(DK)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.dk}</span>
                    </button>
                    <button onclick="selectAttribute('haerte')" class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors cursor-pointer text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">üíé</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Druckfestigkeit</span>
                                <span class="block text-xs text-gray-500 leading-tight">(N/mm¬≤)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.haerte}</span>
                    </button>
                    <button onclick="selectAttribute('quellenSchwindenRadial')" class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors cursor-pointer text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">‚ÜîÔ∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Quellen/Schwn.</span>
                                <span class="block text-xs text-gray-500 leading-tight">(radial %)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.quellenSchwindenRadial}</span>
                    </button>
                    <button onclick="selectAttribute('dichte')" class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors cursor-pointer text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">‚öñÔ∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Rohdichte</span>
                                <span class="block text-xs text-gray-500 leading-tight">(kg/m¬≥)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.dichte}</span>
                    </button>
                    <button onclick="selectAttribute('gewicht')" class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors cursor-pointer text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">üèãÔ∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">E-Modul</span>
                                <span class="block text-xs text-gray-500 leading-tight">(N/mm¬≤)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.gewicht.toLocaleString('de-DE')}</span>
                    </button>
                </div>
            ` : `
                 <div class="space-y-1 mt-auto">
                    <div class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 rounded-lg text-left">
                        <div class="flex items-center">
                            <span class="mr-2 text-xs">üõ°Ô∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Dauerhaftigkeit</span>
                                <span class="block text-xs text-gray-500 leading-tight">(DK)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.dk}</span>
                    </div>
                    <div class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 rounded-lg text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">üíé</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Druckfestigkeit</span>
                                <span class="block text-xs text-gray-500 leading-tight">(N/mm¬≤)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.haerte}</span>
                    </div>
                    <div class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 rounded-lg text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">‚ÜîÔ∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Quellen/Schwinden</span>
                                <span class="block text-xs text-gray-500 leading-tight">(%)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.quellenSchwindenRadial}</span>
                    </div>
                    <div class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 rounded-lg text-left">
                         <div class="flex items-center">
                            <span class="mr-2 text-xs">‚öñÔ∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">Rohdichte</span>
                                <span class="block text-xs text-gray-500 leading-tight">(kg/m¬≥)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.dichte}</span>
                    </div>
                    <div class="w-full flex justify-between items-center py-1 px-1 bg-blue-50 rounded-lg text-left">
                        <div class="flex items-center">
                            <span class="mr-2 text-xs">üèãÔ∏è</span>
                            <div>
                                <span class="text-xs font-medium leading-tight">E-Modul</span>
                                <span class="block text-xs text-gray-500 leading-tight">(N/mm¬≤)</span>
                            </div>
                        </div>
                        <span class="font-bold text-blue-600 text-base">${cardData.gewicht.toLocaleString('de-DE')}</span>
                    </div>
                </div>
            `;
            
            cardFront.innerHTML = `
                <div class="text-center mb-1">
                    <div class="flex justify-center items-center gap-2">
                        <div class="text-3xl">üå≥</div>
                        <h3 class="text-lg font-bold text-amber-800 truncate">${cardData.name}</h3>
                        ${infoButtonHTML}
                    </div>
                </div>
                ${attributeButtons}
            `;

            // Card back (hidden)
            const cardBack = document.createElement('div');
            cardBack.className = 'card-back bg-gradient-to-br from-amber-600 to-orange-700 rounded-xl shadow-lg border-2 border-amber-300 p-4 flex items-center justify-center relative overflow-hidden';
            cardBack.innerHTML = `
                <div class="wood-texture absolute inset-0"></div>
                <div class="text-center z-10">
                    <div class="text-8xl mb-4">üå≥</div>
                    <h3 class="text-xl font-bold text-orange-400 opacity-90">Holzquartett</h3>
                </div>
            `;

            card.appendChild(cardFront);
            card.appendChild(cardBack);
            
            return card;
        }

        function displayCards() {
            const playerCardContainer = document.getElementById('playerCard');
            const aiCardContainer = document.getElementById('aiCard');

            playerCardContainer.innerHTML = '';
            aiCardContainer.innerHTML = '';

            const playerCard = createCard(gameState.currentPlayerCard, true, true);
            const aiCard = createCard(gameState.currentAiCard, false, false);

            playerCardContainer.appendChild(playerCard);
            aiCardContainer.appendChild(aiCard);
        }

        function selectAttribute(attribute) {
            // Prevent multiple selections
            if (gameState.roundInProgress) return;
            gameState.roundInProgress = true;

            const playerValue = gameState.currentPlayerCard[attribute];
            const aiValue = gameState.currentAiCard[attribute];

            // Reveal AI card immediately
            const aiCardElement = document.getElementById('aiCard').querySelector('.card-3d');
            aiCardElement.classList.remove('card-flipped');

            // Disable only the attribute buttons
            const attributeButtons = document.querySelectorAll('#playerCard .space-y-1 > button');
            attributeButtons.forEach(button => {
                button.disabled = true;
                button.classList.remove('hover:bg-blue-100', 'cursor-pointer');
                button.classList.add('cursor-not-allowed', 'opacity-50');
            });

            // Determine winner and highlight winning attribute
            let winner = '';
            let resultText = '';
            let resultClass = '';

            let playerWins;
            let comparisonChar = '>';
            if (attribute === 'quellenSchwindenRadial' || attribute === 'dk') {
                comparisonChar = '<';
                if (playerValue < aiValue) playerWins = true;
                else if (aiValue < playerValue) playerWins = false;
                else playerWins = 'tie';
            } else {
                if (playerValue > aiValue) playerWins = true;
                else if (aiValue > playerValue) playerWins = false;
                else playerWins = 'tie';
            }

            if (playerWins === true) {
                winner = 'player';
                resultText = `üéâ Du gewinnst!`;
                resultClass = 'text-green-600';
                highlightAttribute(attribute, 'win');
                gameState.playerCards.shift();
                gameState.aiCards.shift();
                gameState.playerCards.push(gameState.currentPlayerCard, gameState.currentAiCard);
                document.getElementById('playerCard').querySelector('.card-3d').classList.add('pulse-win');
            } else if (playerWins === false) {
                winner = 'ai';
                resultText = `üòû KI gewinnst!`;
                resultClass = 'text-red-600';
                highlightAttribute(attribute, 'lose');
                gameState.playerCards.shift();
                gameState.aiCards.shift();
                gameState.aiCards.push(gameState.currentAiCard, gameState.currentPlayerCard);
                document.getElementById('playerCard').querySelector('.card-3d').classList.add('pulse-lose');
            } else {
                winner = 'tie';
                resultText = `ü§ù Unentschieden!`;
                resultClass = 'text-yellow-600';
                highlightAttribute(attribute, 'tie');
                gameState.playerCards.push(gameState.playerCards.shift());
                gameState.aiCards.push(gameState.aiCards.shift());
            }

            // Show result
            const formattedPlayerValue = typeof playerValue === 'number' ? playerValue.toLocaleString('de-DE') : playerValue;
            const formattedAiValue = typeof aiValue === 'number' ? aiValue.toLocaleString('de-DE') : aiValue;

            document.getElementById('resultText').textContent = resultText;
            document.getElementById('resultText').className = `text-xl font-bold mb-1 ${resultClass}`;
            document.getElementById('resultDetails').textContent = `${attributeInfo[attribute].name.split(' (')[0]}: ${formattedPlayerValue} vs ${formattedAiValue}`;
            
            document.getElementById('attributeSelection').classList.add('hidden');
            document.getElementById('resultDisplay').classList.remove('hidden');
            document.getElementById('nextRoundButton').classList.remove('hidden');
            
            const infoButton = document.getElementById('player-info-button');
            if (infoButton) {
                infoButton.classList.remove('hidden');
                // NEU: Animation hinzuf√ºgen
                infoButton.classList.add('animate-pop-in');
                setTimeout(() => {
                    infoButton.classList.remove('animate-pop-in');
                }, 500); // Dauer der Animation
            }


            gameState.roundResult = winner;
            gameState.selectedAttribute = attribute;
            updateDisplay();
            checkGameOver();
        }

        function highlightAttribute(attribute, result) {
            const playerCard = document.getElementById('playerCard');
            const aiCard = document.getElementById('aiCard');
            
            let playerBgColor = '', aiBgColor = '';
            
            if (result === 'win') {
                playerBgColor = 'bg-green-200';
                aiBgColor = 'bg-gray-200';
            } else if (result === 'lose') {
                playerBgColor = 'bg-red-200';
                aiBgColor = 'bg-green-200';
            } else {
                playerBgColor = 'bg-yellow-200';
                aiBgColor = 'bg-yellow-200';
            }
            
            const attributeSelectors = {
                'dk': 0, 'haerte': 1, 'quellenSchwindenRadial': 2, 'dichte': 3, 'gewicht': 4
            };
            const attributeIndex = attributeSelectors[attribute];
            
            const playerAttributes = playerCard.querySelectorAll('.space-y-1 > *');
            if (playerAttributes[attributeIndex]) {
                playerAttributes[attributeIndex].className = playerAttributes[attributeIndex].className.replace(/bg-blue-50|hover:bg-blue-100/g, playerBgColor);
            }
            
            const aiAttributes = aiCard.querySelectorAll('.space-y-1 > *');
            if (aiAttributes[attributeIndex]) {
                aiAttributes[attributeIndex].className = aiAttributes[attributeIndex].className.replace(/bg-blue-50|hover:bg-blue-100/g, aiBgColor);
            }
        }

        function nextRound() {
            document.getElementById('playerCard').querySelector('.card-3d').classList.remove('pulse-win', 'pulse-lose');

            if (gameState.playerCards.length === 0 || gameState.aiCards.length === 0) {
                endGame();
                return;
            }

            gameState.currentPlayerCard = gameState.playerCards[0];
            gameState.currentAiCard = gameState.aiCards[0];
            gameState.roundInProgress = false;

            document.getElementById('attributeSelection').classList.remove('hidden');
            document.getElementById('nextRoundButton').classList.add('hidden');
            document.getElementById('resultDisplay').classList.add('hidden');


            displayCards();
            updateDisplay();
        }

        function updateDisplay() {
            const playerCardsCount = gameState.playerCards.length;
            const aiCardsCount = gameState.aiCards.length;
            
            document.getElementById('playerCards').textContent = playerCardsCount;
            document.getElementById('aiCards').textContent = aiCardsCount;
            
            const totalCards = playerCardsCount + aiCardsCount;
            const playerPercentage = totalCards > 0 ? (playerCardsCount / totalCards) * 100 : 50;
            
            const statusBar = document.getElementById('statusBar');
            if (statusBar) {
                statusBar.style.width = `${playerPercentage}%`;
                // Change color based on who is winning
                if (playerPercentage > 50) {
                    statusBar.classList.remove('bg-red-500');
                    statusBar.classList.add('bg-amber-500');
                } else if (playerPercentage < 50) {
                    statusBar.classList.remove('bg-amber-500');
                    statusBar.classList.add('bg-red-500');
                } else {
                     statusBar.classList.remove('bg-red-500');
                     statusBar.classList.add('bg-amber-500');
                }
            }
        }

        function checkGameOver() {
            if (gameState.playerCards.length === 0 || gameState.aiCards.length === 0) {
                setTimeout(endGame, 2000);
            }
        }

        function endGame() {
            const playerWon = gameState.playerCards.length > 0;
            
            document.getElementById('gameOverTitle').textContent = playerWon ? 'üéâ Gl√ºckwunsch!' : 'üòû Spiel verloren';
            document.getElementById('gameOverTitle').className = `text-3xl font-bold mb-4 ${playerWon ? 'text-green-600' : 'text-red-600'}`;
            document.getElementById('gameOverText').textContent = playerWon ? 
                `Du hast gewonnen, ${gameState.playerName}! Du hast alle Karten gesammelt.` :
                `Die KI hat gewonnen. Versuche es nochmal!`;

            if (playerWon) {
                saveToLeaderboard(gameState.playerName, gameState.playerCards.length);
            }

            document.getElementById('gameOverModal').classList.remove('hidden');
        }

        function saveToLeaderboard(playerName, score) {
            let leaderboard = JSON.parse(localStorage.getItem('holzquartett-leaderboard') || '[]');
            leaderboard.push({
                name: playerName,
                score: score,
                date: new Date().toLocaleDateString('de-DE')
            });
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard = leaderboard.slice(0, 10);
            localStorage.setItem('holzquartett-leaderboard', JSON.stringify(leaderboard));
        }

        function showLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('holzquartett-leaderboard') || '[]');
            const leaderboardList = document.getElementById('leaderboardList');
            
            if (leaderboard.length === 0) {
                leaderboardList.innerHTML = '<p class="text-gray-500 text-center">Noch keine Eintr√§ge</p>';
            } else {
                leaderboardList.innerHTML = leaderboard.map((entry, index) => `
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="font-semibold">${index + 1}. ${entry.name}</span>
                        <span class="text-sm text-gray-600">${entry.score} Karten - ${entry.date}</span>
                    </div>
                `).join('');
            }
            
            document.getElementById('gameOverModal').classList.add('hidden');
            document.getElementById('leaderboardModal').classList.remove('hidden');
        }

        function closeLeaderboard() {
            document.getElementById('leaderboardModal').classList.add('hidden');
            document.getElementById('gameOverModal').classList.remove('hidden');
        }

        function resetGame() {
            gameState = {
                playerName: '', playerCards: [], aiCards: [], currentPlayerCard: null, currentAiCard: null, playerTurn: true, gameOver: false, roundResult: null, roundInProgress: false
            };
            document.getElementById('gameOverModal').classList.add('hidden');
            document.getElementById('leaderboardModal').classList.add('hidden');
            document.getElementById('gameContainer').classList.add('hidden');
            document.getElementById('setupModal').classList.remove('hidden');
            document.getElementById('playerName').value = '';
            document.getElementById('infoModal').classList.add('hidden');
        }

        // --- Info Feature ---
        function showWoodInfo() {
            const woodName = gameState.currentPlayerCard.name;
            const modal = document.getElementById('infoModal');
            const title = document.getElementById('infoModalTitle');
            
            title.textContent = `Wissenswertes √ºber ${woodName}`;
            getWoodInfo(woodName);
            modal.classList.remove('hidden');
        }

        function closeInfoModal() {
            document.getElementById('infoModal').classList.add('hidden');
        }

        function getWoodInfo(woodName) {
            const content = document.getElementById('infoModalContent');
            const infoData = woodInfo[woodName];
            
            if (infoData) {
                content.innerHTML = `
                    <p>${infoData.info}</p>
                    <div class="flex gap-4 mt-4">
                        <div class="w-1/2">
                            <h4 class="font-semibold mb-2 text-center">Baum</h4>
                            <img src="${infoData.bildBaum}" alt="Bild von ${woodName} Baum" class="w-full h-auto rounded-lg object-cover" onerror="this.style.display='none'">
                        </div>
                        <div class="w-1/2">
                            <h4 class="font-semibold mb-2 text-center">Querschnitt</h4>
                            <img src="${infoData.bildQuerschnitt}" alt="Bild von ${woodName} Querschnitt" class="w-full h-auto rounded-lg object-cover" onerror="this.style.display='none'">
                        </div>
                    </div>
                `;
            } else {
                content.innerHTML = "<p>F√ºr diese Holzart sind aktuell keine Informationen verf√ºgbar.</p>";
            }
        }
        <script>
window.onload = function() {
  window.scrollTo(0, 0);
  document.body.scrollTop = 0; // Fallback f√ºr √§ltere Browser
};
