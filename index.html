<div><br class="Apple-interchange-newline"><!DOCTYPE html><br><html lang="de"><br><head><br>    <meta charset="UTF-8"><br>    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><br>    <title>Holz-Quartett</title><br>    <script src="https://cdn.tailwindcss.com"></script><br>    <style><br>        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');<br><br>        body {<br>            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;<br>            font-weight: 300;<br>        }<br><br>        .card-3d {<br>            transform-style: preserve-3d;<br>            transition: transform 0.6s;<br>        }<br><br>        .card-flipped {<br>            transform: rotateY(180deg);<br>        }<br><br>        .card-front, .card-back {<br>            backface-visibility: hidden;<br>            position: absolute;<br>            width: 100%;<br>            height: 100%;<br>        }<br><br>        .card-back {<br>            transform: rotateY(180deg);<br>            background-image: url('https://raw.githubusercontent.com/aufdemholzweg/holzquartett/65fd843a4db1ee434faaf81a32f77951a5afb72a/images/background_card.jpg');<br>            background-size: cover;<br>            background-position: center;<br>        }<br><br>        .wood-texture {<br>            background: linear-gradient(45deg, #8B4513 25%, transparent 25%),<br>                        linear-gradient(-45deg, #8B4513 25%, transparent 25%),<br>                        linear-gradient(45deg, transparent 75%, #8B4513 75%),<br>                        linear-gradient(-45deg, transparent 75%, #8B4513 75%);<br>            background-size: 20px 20px;<br>            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;<br>            background-color: #D2B48C;<br>            opacity: 0.1;<br>        }<br><br>        .animate-pop-in {<br>            animation: pop-in 0.5s ease-out forwards;<br>        }<br><br>        .animate-glow-win {<br>            animation: glow-win 1.2s ease-out;<br>        }<br><br>        .animate-glow-lose {<br>            animation: glow-lose 1.2s ease-out;<br>        }<br><br>        @keyframes pop-in {<br>            0% { transform: scale(0); opacity: 0; }<br>            70% { transform: scale(1.2); opacity: 1; }<br>            100% { transform: scale(1); }<br>        }<br><br>        @keyframes glow-win {<br>            0% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); } /* green-400 */<br>            50% { box-shadow: 0 0 30px 15px rgba(74, 222, 128, 0.6); }<br>            100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }<br>        }<br><br>        @keyframes glow-lose {<br>            0% { box-shadow: 0 0 0 0 rgba(248, 113, 113, 0); } /* red-400 */<br>            50% { box-shadow: 0 0 30px 15px rgba(248, 113, 113, 0.6); }<br>            100% { box-shadow: 0 0 0 0 rgba(248, 113, 113, 0); }<br>        }<br><br>        .hover-lift:hover {<br>            transform: translateY(-4px);<br>            box-shadow: 0 10px 25px rgba(0,0,0,0.15);<br>        }<br><br>        .status-flash-win {<br>            animation: flash-green 1.2s ease-out;<br>        }<br>        .status-flash-lose {<br>            animation: flash-red 1.2s ease-out;<br>        }<br><br>        @keyframes flash-green {<br>          50% { background-color: #22c55e; box-shadow: 0 0 15px #22c55e; }<br>        }<br>        @keyframes flash-red {<br>          50% { background-color: #ef4444; box-shadow: 0 0 15px #ef4444; }<br>        }<br><br>        .falling-star {<br>            position: absolute;<br>            font-size: 7rem; /* 112px */<br>            z-index: 100;<br>            animation: fall-and-fade 1.2s ease-in forwards;<br>        }<br><br>        @keyframes fall-and-fade {<br>            0% { transform: translateY(-30px) scale(1.5); opacity: 0; }<br>            30% { transform: translateY(0) scale(1); opacity: 1; }<br>            100% { transform: translateY(var(--end-y)) scale(0.3); opacity: 0; }<br>        }<br>        .card-background {<br>            background-image: url('https://raw.githubusercontent.com/aufdemholzweg/holzquartett/e7cfc18394e2e7f2d0b91df1138b0d7bc7930699/images/background_front.jpg');<br>            background-size: cover;<br>            background-position: center;<br>        }<br>    </style><br></head><br><body class="bg-gradient-to-br from-amber-50 to-orange-100 min-h-screen"><br>    <header class="bg-white shadow-sm border-b-2 border-amber-200"><br>        <div class="max-w-6xl mx-auto px-4 p-3"><br>            <h1 class="text-2xl font-bold text-amber-800 text-center">üå≥ Holz-Quartett</h1><br>            <p class="text-xs text-gray-500 text-center mt-1">von Christopher Lehr, in Verbindung mit meiner Masterarbeit</p><br>        </div><br>    </header><br><br>    <div id="setupModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><br>        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl text-center relative"><br>            <br>            <button onclick="window.showGameRules()" class="absolute top-3 right-3 text-5xl text-gray-400 hover:text-gray-600 transition-colors" aria-label="Spielregeln anzeigen"><br>                üé≤<br>            </button><br>            <h2 class="text-2xl font-bold text-amber-800 mb-6">Spielmodus w√§hlen  </h2><br>            <div class="space-y-4"><br>                <button onclick="window.showNamePrompt('ai')" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors text-lg"><br>                    üéÆ  Gegen Computer spielen<br>                </button><br>                <button onclick="window.showNamePrompt('multiplayer')" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors text-lg"><br>                    üßë‚Äçü§ù‚Äçüßë  Mit Freund online spielen<br>                </button><br>            </div><br><br>            <div class="mt-6 flex items-center justify-center space-x-2"><br>                <span class="text-gray-700">üîá </span><br>                <label for="soundToggle" class="relative inline-flex items-center cursor-pointer"><br>                    <input type="checkbox" id="soundToggle" class="sr-only peer"><br>                    <div class="w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-amber-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-600"></div><br>                </label><br>                <span class="text-gray-700"> üîä</span><br>            </div><br>            </div><br>    </div><br><br>    <div id="nameModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><br>        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl"><br>            <h2 class="text-2xl font-bold text-amber-800 mb-6 text-center">Dein Name</h2><br>            <div class="space-y-3"><br>                <div><br>                    <label class="block text-sm font-medium text-gray-700 mb-2">Bitte gib deinen Namen ein:</label><br>                    <input type="text" id="playerName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent" placeholder="Spielername"><br>                </div><br>                <button id="nameSubmitButton" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"><br>                    Weiter<br>                </button><br>            </div><br>        </div><br>    </div><br><br>    <div id="multiplayerLobbyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4"><br>        <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4 shadow-2xl text-center"><br>            <h2 id="lobbyTitle" class="text-2xl font-bold text-amber-800 mb-4">Warte auf Mitspieler...</h2><br>            <p id="lobbyText" class="text-gray-700 mb-6">Teile diesen Link mit deinem Freund, um das Spiel zu starten:</p><br>            <div class="bg-gray-100 p-3 rounded-lg border border-gray-300"><br>                <input id="shareLink" type="text" class="w-full bg-transparent text-center text-blue-600" readonly><br>            </div><br>            <button onclick="window.copyShareLink()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors"><br>                Link kopieren<br>            </button><br>            <p id="lobbyStatus" class="mt-6 text-green-600 font-semibold"></p><br>        </div><br>    </div><br><br><br>    <div id="gameContainer" class="hidden max-w-6xl mx-auto px-4 py-4 relative"><br>        <div id="animationContainer" class="absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden"></div><br>        <div class="max-w-md mx-auto mb-1 space-y-1"> <div class="flex justify-center space-x-2"><br>                <div id="playerScoreBox" class="w-1/2 bg-white rounded-xl shadow-lg p-2 text-center relative"><br>                    <p id="playerNameDisplay" class="text-base font-bold text-amber-600 truncate"></p><br>                    <p class="text-sm text-gray-500">Karten: <span id="playerCards" class="font-semibold">15</span></p><br>                </div><br>                <div class="w-1/2 bg-white rounded-xl shadow-lg p-2 text-center"><br>                    <p id="opponentNameDisplay" class="text-base font-bold text-red-600">Computer</p><br>                    <p class="text-sm text-gray-500">Karten: <span id="aiCards" class="font-semibold">15</span></p><br>                </div><br>            </div><br>            <div class="w-full bg-gray-200 rounded-full h-4 relative overflow-hidden border border-gray-300"><br>                <div id="statusBar" class="h-full rounded-l-full transition-all duration-500" style="width: 50%; background-color: #f59e0b;"></div><br>                <div class="absolute inset-0 flex justify-center items-center"><br>                    <div class="w-0.5 h-full bg-white opacity-75"></div><br>                </div><br>            </div><br>        </div><br><br>        <div class="flex justify-center space-x-2 sm:space-x-2 mb-4 max-w-md mx-auto"><br>            <div class="text-center w-1/2"><br>                <div id="playerCard" class="relative aspect-[20/38] perspective-1000"></div><br>            </div><br>            <div class="text-center w-1/2"><br>                <div id="aiCard" class="relative aspect-[20/38] perspective-1000"></div><br>            </div><br>        </div><br><br>        <div class="bg-white rounded-xl shadow-lg px-1 pt-1 pb-0.5 mt-4 text-center mx-auto flex flex-col items-center max-w-md w-full min-h-[6rem]"><br>             <div id="turnIndicator" class="hidden text-sm font-semibold p-1"></div><br>            <div id="attributeSelection" class=""><br>                 <h3 class="text-base font-semibold text-gray-700 mb-1">W√§hle eine Eigenschaft!</h3><br>            </div><br>            <div id="resultDisplay" class="hidden flex flex-col flex-grow w-full px-2"><br>                 <h3 id="resultText" class="text-lg sm:text-xl font-bold"></h3><br>                 <p id="resultDetails" class="text-xs sm:text-sm text-gray-600 mt-auto pb-0.5"></p><br>            </div><br>             <div id="nextRoundButton" class="hidden w-full mt-2"><br>                 <button onclick="window.nextRound()" class="w-full bg-amber-600 hover:bg-amber-800 text-white font-bold py-3 px-8 rounded-xl transition-colors"><br>                      ‚û°Ô∏è N√§chster Zug<br>                 </button><br>             </div><br>        </div><br>    </div><br><br>    <div id="reflectionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4"><br>        <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4 shadow-2xl text-center"><br>            <h2 class="text-2xl font-bold text-amber-800 mb-4">üéâ Super gespielt! Zeit zum Reflektieren!</h2><br>            <p id="reflectionQuestion" class="text-gray-700 mb-6 text-left"></p><br>            <textarea id="reflectionAnswer" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent min-h-[100px]" placeholder="Deine Begr√ºndung..."></textarea><br>            <button onclick="window.showFinalWinScreen()" class="mt-6 w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors"><br>                Weiter zum Ergebnis<br>            </button><br>        </div><br>    </div><br><br>    <div id="gameOverModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><br>        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl text-center"><br>            <h2 id="gameOverTitle" class="text-3xl font-bold mb-3"></h2><br>            <p id="gameOverText" class="text-gray-600 mb-6"></p><br>            <div class="space-y-2"><br>                <button onclick="window.showLeaderboard()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg"><br>                    üèÜ Bestenliste anzeigen<br>                </button><br>                <button onclick="window.resetGame()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 px-6 rounded-lg"><br>                    üîÑ Neues Spiel<br>                </button><br>            </div><br>        </div><br>    </div><br><br>    <div id="leaderboardModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><br>        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl"><br>            <h2 class="text-2xl font-bold text-amber-800 mb-6 text-center">üèÜ Bestenliste</h2><br>            <div id="leaderboardList" class="space-y-1 mb-6"></div><br>            <button onclick="window.closeLeaderboard()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg"><br>                Schlie√üen<br>            </button><br>        </div><br>    </div><br><br>    <div id="infoModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 px-4"><br>        <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4 shadow-2xl relative"><br>            <button onclick="window.closeInfoModal()" class="absolute top-2 right-3 text-2xl text-gray-400 hover:text-gray-600">&times;</button><br>            <h2 id="infoModalTitle" class="text-2xl font-bold text-amber-800 mb-4">Wissenswertes</h2><br>            <div id="infoModalContent" class="text-gray-700 space-y-2 max-h-[60vh] overflow-y-auto"></div><br>        </div><br>    </div><br><br>    <script type="module"><br>        // ===== Firebase Imports =====<br>        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";<br>        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";<br>        import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot, serverTimestamp, deleteDoc, collection, query, orderBy, limit, getDocs, increment } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";<br><br>        // ===== Firebase Config =====<br>        const firebaseConfig = {<br>            apiKey: "AIzaSyCyRXl8-JPr1xTXPDi1VG-eQk6fOnTpqUI", // Consider securing this key<br>            authDomain: "holzquartett-3a177.firebaseapp.com",<br>            projectId: "holzquartett-3a177",<br>            storageBucket: "holzquartett-3a177.appspot.com",<br>            messagingSenderId: "1081595025073",<br>            appId: "1:1081595025073:web:bc571fffb6e4f20b27f490",<br>            measurementId: "G-HKLWFJE83K"<br>        };<br><br>        const app = initializeApp(firebaseConfig);<br>        const db = getFirestore(app);<br>        const auth = getAuth(app);<br>        const appId = firebaseConfig.projectId;<br><br>        // ===== Global State =====<br>        let gameMode = null;<br>        let gameId = null;<br>        let localPlayerId = null;<br>        let unsubscribeGame = null;<br>        let localGameState = {};<br>        let hasCopiedShareLink = false;<br>        let isMuted = false;<br><br>        // ===== Sound Effects (Updated 'lose' sound) =====<br>        const sounds = {<br>            flip: new Audio('https://cdn.pixabay.com/audio/2022/03/15/audio_139083c224.mp3'),<br>            win: new Audio('https://github.com/aufdemholzweg/holzquartett/blob/894e048eea71ba49921abfe6827bd8dc723f8c2d/gewonnen.mp3?raw=true'),<br>            chime: new Audio('https://cdn.pixabay.com/audio/2021/08/04/audio_12b0c744c8.mp3'),<br>            starWin: new Audio('https://cdn.pixabay.com/audio/2022/10/28/audio_73b90209e7.mp3'),<br>            lose: new Audio('https://cdn.pixabay.com/audio/2022/03/10/audio_941650c1f5.mp3') // <<< MODIFIED URL<br>        };<br>        sounds.flip.volume = 0.5;<br>        sounds.win.volume = 0.4;<br>        sounds.chime.volume = 0.6;<br>        sounds.starWin.volume = 0.7;<br>        sounds.lose.volume = 0.5;<br><br>        // <<< NEU: Sounds vorab laden f√ºr bessere Zuverl√§ssigkeit >>><br>        Object.values(sounds).forEach(sound => {<br>            sound.preload = 'auto';<br>        });<br><br>        // ===== MODIFIED playSound function =====<br>        function playSound(sound) {<br>            if (isMuted) return;<br>            sound.currentTime = 0;<br>            sound.play().catch(e => console.log("Sound playback error:", e));<br>        }<br>        let roundSoundPlayed = false;<br><br>        // ===== Wood Data =====<br>        const woodCards = [ /* ... woodCards data ... */<br>            {name: "Eiche", dk: 2, haerte: 85, quellenSchwindenRadial: 4.0, dichte: 650, gewicht: 12000}, {name: "Buche", dk: 5, haerte: 80, quellenSchwindenRadial: 5.8, dichte: 720, gewicht: 14000}, {name: "Kiefer", dk: 3, haerte: 40, quellenSchwindenRadial: 3.5, dichte: 520, gewicht: 11000}, {name: "Fichte", dk: 4, haerte: 35, quellenSchwindenRadial: 3.6, dichte: 450, gewicht: 11000}, {name: "Tanne", dk: 4, haerte: 38, quellenSchwindenRadial: 3.5, dichte: 460, gewicht: 10000}, {name: "L√§rche", dk: 3, haerte: 55, quellenSchwindenRadial: 3.7, dichte: 590, gewicht: 12000}, {name: "Birke", dk: 5, haerte: 60, quellenSchwindenRadial: 5.4, dichte: 650, gewicht: 13000}, {name: "Ahorn", dk: 5, haerte: 75, quellenSchwindenRadial: 4.8, dichte: 630, gewicht: 12500}, {name: "Esche", dk: 5, haerte: 90, quellenSchwindenRadial: 4.9, dichte: 700, gewicht: 13000}, {name: "Kirsche", dk: 3, haerte: 70, quellenSchwindenRadial: 4.0, dichte: 600, gewicht: 11500}, {name: "Nussbaum", dk: 3, haerte: 65, quellenSchwindenRadial: 4.0, dichte: 640, gewicht: 12000}, {name: "Douglasie", dk: 3, haerte: 45, quellenSchwindenRadial: 3.5, dichte: 510, gewicht: 12000}, {name: "Zeder", dk: 2, haerte: 42, quellenSchwindenRadial: 2.8, dichte: 480, gewicht: 9500}, {name: "Mahagoni", dk: 2, haerte: 55, quellenSchwindenRadial: 3.0, dichte: 550, gewicht: 10500}, {name: "Teak", dk: 1, haerte: 60, quellenSchwindenRadial: 2.5, dichte: 650, gewicht: 11000}, {name: "Bambus", dk: 4, haerte: 50, quellenSchwindenRadial: 3.0, dichte: 400, gewicht: 18000}, {name: "Pappel", dk: 5, haerte: 25, quellenSchwindenRadial: 4.5, dichte: 380, gewicht: 9000}, {name: "Weide", dk: 5, haerte: 30, quellenSchwindenRadial: 4.0, dichte: 420, gewicht: 8000}, {name: "Linde", dk: 5, haerte: 35, quellenSchwindenRadial: 3.8, dichte: 530, gewicht: 9000}, {name: "Ulme", dk: 3, haerte: 75, quellenSchwindenRadial: 4.5, dichte: 680, gewicht: 11500}, {name: "Kastanie", dk: 2, haerte: 50, quellenSchwindenRadial: 3.5, dichte: 600, gewicht: 10000}, {name: "Robinie", dk: 1, haerte: 80, quellenSchwindenRadial: 3.0, dichte: 730, gewicht: 15000}, {name: "Hemlock", dk: 4, haerte: 40, quellenSchwindenRadial: 3.6, dichte: 500, gewicht: 10000}, {name: "Zypresse", dk: 2, haerte: 48, quellenSchwindenRadial: 3.0, dichte: 520, gewicht: 9000}, {name: "Redwood", dk: 2, haerte: 35, quellenSchwindenRadial: 2.8, dichte: 400, gewicht: 8500}, {name: "Hickory", dk: 3, haerte: 95, quellenSchwindenRadial: 5.5, dichte: 750, gewicht: 14000}, {name: "Wenge", dk: 2, haerte: 88, quellenSchwindenRadial: 3.8, dichte: 880, gewicht: 16000}, {name: "Zebrano", dk: 3, haerte: 70, quellenSchwindenRadial: 4.0, dichte: 750, gewicht: 13000}, {name: "Palisander", dk: 2, haerte: 82, quellenSchwindenRadial: 3.0, dichte: 850, gewicht: 16000}, {name: "Ebenholz", dk: 1, haerte: 98, quellenSchwindenRadial: 3.2, dichte: 1200, gewicht: 16500}<br>        ];<br>        const woodInfo = { /* ... woodInfo data ... */<br>             "Eiche": { info: `Eiche (QE) Die Eiche z√§hlt zu den bedeutendsten heimischen Laubh√∂lzern Europas. Ihr Holz ist hart, schwer und sehr dauerhaft, was sie zu einem bevorzugten Werkstoff im Innen‚Äë und Au√üenbereich macht. Besonders charakteristisch sind die hohen Gerbstoffanteile, die das Holz widerstandsf√§hig gegen Pilze und Sch√§dlinge machen ‚Äì gleichzeitig k√∂nnen sie beim Kontakt mit Eisen zu Verf√§rbungen f√ºhren. Eichenholz ist grobporig und zeigt einen deutlichen √úbergang zwischen Fr√ºh- und Sp√§tholz, wodurch die Jahresringe klar sichtbar sind. Diese ausgepr√§gte Maserung sorgt f√ºr eine markante, lebendige Optik. Verwendung: M√∂bel, Fu√üb√∂den, Treppen, Fassdauben (z.B. f√ºr Weinf√§sser), Schiffbau, Terrassen, Br√ºcken, Fachwerk. Funfact: Bereits in der Antike galt die Eiche als Symbol f√ºr St√§rke und Best√§ndigkeit ‚Äì sie ziert bis heute zahlreiche Wappen und M√ºnzen.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/eiche_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/eiche_2.jpg?raw=true" },<br>             "Buche": { info: `Buche (BU) Die Buche ist ein gleichm√§√üig strukturiertes Hartholz heimischer W√§lder. Ihr Holz ist z√§h, biegsam und relativ harzarm, wodurch es sich sehr gut f√ºr M√∂bel und Parkett eignet. Buchenholz ist ringporig mit mittelgro√üen Poren im Fr√ºhholz und dichterem Sp√§tholz, sodass die √úberg√§nge dezent sichtbar sind ‚Äì die Jahresringe sind gut erkennbar, aber nicht grob. Verwendung: M√∂bel, Parkett, Furniere, Sperrholz, Innenausbau. Funfact: Buchenholz war lange Zeit typisch f√ºrs Wagenrad ‚Äì wegen seiner Kombination aus Z√§higkeit und Elastizit√§t.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/buche_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/buche_2.jpg?raw=true" },<br>             "Kiefer": { info: `Kiefer (KI) Kiefer ist ein weit verbreitetes Nadelholz mit markanter Jahresringstruktur. Es ist weich, harzhaltig und relativ leicht zu bearbeiten. Das Holz zeigt keine ausgepr√§gten gro√üen Poren wie Laubh√∂lzer, sondern eine eher gleichm√§√üige Zellstruktur ‚Äì Jahresringe und Harzkan√§le sind sichtbar. Verwendung: Bauholz, Dachst√ºhle, Innenausbau, M√∂bel, Paneele. Funfact: Kiefernharz wurde fr√ºher als Klebstoff oder als Bestandteil von Salben und Dichtungsmaterialien verwendet.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/kiefer_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/kiefer_2.jpg?raw=true" },<br>             "Fichte": { info: `Fichte (FI) Fichte ist ein klassisches Bauholz mit guter Festigkeit bei geringem Gewicht. Es l√§sst sich leicht bearbeiten und vielfach einsetzen. Das Holz weist eine feine Zellstruktur auf, ohne gro√üe Poren ‚Äì Jahresringe sind erkennbar, aber nicht grob. Verwendung: Bauholz, Innenverkleidung, Dach, M√∂bel, Paneele. Funfact: In vielen Gebirgsregionen war Fichtenholz √ºber Jahrhunderte hinweg der Standard f√ºr Dachkonstruktionen und S√§gewerke.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/fichte_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/fichte_2.jpg?raw=true" },<br>             "Tanne": { info: `Tanne (TA) Tanne ist ein harzarmes, vergleichsweise feines Nadelholz, das oft als Alternative zur Fichte verwendet wird. Die Struktur √§hnelt der Fichte: feine Fasern, dezente Jahresringe, keine ausgepr√§gten Poren. Verwendung: Innenausbau, M√∂bel, Paneele, Bauholz. Funfact: Da Tanne weniger Harz enth√§lt, ist sie angenehmer in R√§umen einzusetzen, da sie weniger Geruch abgibt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/tanne_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/tanne_2.jpg?raw=true" },<br>             "L√§rche": { info: `L√§rche (LA) L√§rche ist bekannt f√ºr ihre nat√ºrliche Witterungsbest√§ndigkeit und sch√∂ne Farbe. Sie kombiniert Elastizit√§t mit Festigkeit. Das Holz zeigt ausgepr√§gte Jahresringe und Harzkan√§le ‚Äì die Struktur ist deutlich sichtbar. Verwendung: Fassadenholz, Fenster, Terrassen, Au√üenbau, M√∂bel. Funfact: L√§rchenholz wird h√§ufig ohne chemische Behandlung im Au√üenbereich eingesetzt und erh√§lt mit der Zeit eine edle Vergrauung.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/laerche_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/laerche_2.jpg?raw=true" },<br>             "Birke": { info: `Birke (BI) Birke ist ein helles, dekoratives Holz mit feiner, gleichm√§√üiger Struktur. Es √ºberzeugt durch gute Biegsamkeit. Das Holz ist zerstreutporig ‚Äì Poren sind fein verteilt, ohne gro√üe Unterschiede zwischen Fr√ºh- und Sp√§tholz. Verwendung: M√∂bel, Furniere, Sperrholz, Innenausbau. Funfact: Birkenrinde wurde fr√ºher als wasserabweisendes Material f√ºr Beh√§lter und Boote genutzt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/birke_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/birke_2.jpg?raw=true" },<br>             "Ahorn": { info: `Ahorn (AM) Ahorn ist hart, hell und elegant ‚Äì ideal f√ºr feine M√∂bel, Instrumente und Designanwendungen. Es handelt sich ebenfalls um ein zerstreutporiges Holz mit gleichm√§√üiger Porenverteilung, ohne starke √úberg√§nge zwischen Fr√ºh‚Äë und Sp√§tholz. Verwendung: M√∂bel, Parkett, Instrumente, Schneidebretter. Funfact: Aus Ahorn gewinnt man auch Ahornsirup ‚Äì allerdings aus nordamerikanischen Arten, nicht unbedingt jene zum M√∂belbau.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/ahorn_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/ahorn_2.jpg?raw=true" },<br>             "Esche": { info: `Esche (ES) Die Esche ist ein besonders z√§hes, elastisches Holz mit hoher Festigkeit. Sie zeigt ringporige Struktur mit deutlich sichtbaren Poren im Fr√ºhholz und schmaleren Poren im Sp√§tholz. Verwendung: Werkzeugstiele, Sportger√§te, M√∂bel, Parkett, Innenausbau. Funfact: In der Antike wurden Wagenr√§der und Speichen h√§ufig aus Esche gefertigt ‚Äì wegen ihrer elastischen Eigenschaften.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/esche_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/esche_2.jpg?raw=true" },<br>             "Kirsche": { info: `Kirsche (KR) Kirschbaumholz besitzt warme rote T√∂ne, die mit Licht nachdunkeln, und eine edle Struktur. Ringporig mit deutlichem √úbergang zwischen Fr√ºh- und Sp√§tholz ‚Äì Jahresringe sind gut sichtbar. Verwendung: M√∂bel, Furniere, Innenausbau, Dekor. Funfact: Kirschholz wird oft in M√∂beln verwendet, die mit der Zeit ‚Äúreifer‚Äù aussehen ‚Äì die Farbe verbessert sich mit Alterung.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/kirsche_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/kirsche_2.jpg?raw=true" },<br>             "Nussbaum": { info: `Nussbaum (NU) Nussbaumholz ist dunkel, dekorativ und sehr hochwertig. Das Kernholz hat oft starken Farbkontrast zum Splintholz. Es ist zerstreutporig ‚Äì Poren sind fein √ºber die Fl√§che verteilt, oft mit dekorativen Maserungen. Verwendung: M√∂bel, Furniere, Intarsien, edle Ausstattungen. Funfact: Walnuss (Nussbaum) war schon in der Renaissance sehr gesch√§tzt und zierte viele k√∂nigliche M√∂belst√ºcke.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/nussbaum_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/nussbaum_2.jpg?raw=true" },<br>             "Douglasie": { info: `Douglasie (DO) Douglasienholz ist robust, witterungsbest√§ndig und h√§ufig im Au√üenbau eingesetzt. Die Struktur ist klar erkennbar ‚Äì deutliche Jahresringe mit Transition zwischen Fr√ºh‚Äë und Sp√§tholz. Verwendung: Bauholz, Fassaden, Dach, M√∂bel im Au√üenbereich. Funfact: Die Douglasie stammt urspr√ºnglich aus Nordamerika, ist aber auch in Europa weit verbreitet und wird gro√ügezogen.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/douglasie_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/douglasie_2.jpg?raw=true" },<br>             "Zeder": { info: `Zeder (ZE) Zedernholz duftet angenehm und besitzt von Natur aus eine Resistenz gegen Insektenbefall und Feuchtigkeit. Die Struktur ist fein mit gleichm√§√üigen Poren ‚Äì kein starker Kontrast zwischen Fr√ºh- und Sp√§tholz. Verwendung: M√∂bel, Fassaden, Innenraum, Schr√§nke. Funfact: Zedernholz wird oft in Kleiderschr√§nken eingesetzt, weil es den unverwechselbaren Duft und Insektenabwehr besitzt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/zeder_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/zeder_2.jpg?raw=true" },<br>             "Mahagoni": { info: `Mahagoni (MA) Mahagoni ist ein tropisches Edelholz mit hoher Dauerhaftigkeit und edler Farbe. Es ist zerstreutporig ‚Äì Poren gleichm√§√üig verteilt und oft mit dekorativer Kernholzstruktur. Verwendung: M√∂bel, Fenster, Luxusausstattung, Bootsbau. Funfact: In manchen L√§ndern ist Mahagoni wegen seiner Seltenheit streng reguliert und unterliegt Artenschutzbestimmungen.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/mahagoni_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/mahagoni_2.jpg?raw=true" },<br>             "Teak": { info: `Teak (TE) Teak ist extrem witterungsbest√§ndig durch hohen √ñl- und Harzgehalt ‚Äì ideal f√ºr Au√üenm√∂bel und Schiffsbau. Die Struktur ist fein zerstreutporig, mit dekorativem Erscheinungsbild und gleichm√§√üiger Porenverteilung. Verwendung: Gartenm√∂bel, Terrassen, Boote, Fenster, Au√üenbereich. Funfact: Teakholz war fr√ºher f√ºr den Bau von Kriegsschiffen sehr gefragt wegen seiner Dauerhaftigkeit und Wasserbest√§ndigkeit.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/teak_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/teak_2.jpg?raw=true" },<br>             "Bambus": { info: `Bambus (BA) Bambus ist botanisch gesehen kein Holz, sondern ein Gras ‚Äì dennoch extrem stabil und vielseitig verwendbar. Die Struktur ist r√∂hrenartig und weist keine klassischen Poren wie Harth√∂lzer auf. Verwendung: Fu√üb√∂den, M√∂bel, Treppen, nachhaltiger Bau. Funfact: Bambus w√§chst so schnell, dass einzelne Stangen innerhalb weniger Monate √ºber einen Meter wachsen k√∂nnen.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/bambus_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/bambus_2.jpg?raw=true" },<br>             "Pappel": { info: `Pappel (PA) Pappelholz ist sehr leicht und weich ‚Äì weniger tragf√§hig, aber gut bearbeitbar. Feine Struktur, fast keine gro√üen Poren ‚Äì Jahresringe nur dezent sichtbar. Verwendung: Leichtbau, Verpackungen, M√∂bel mit geringer Belastung. Funfact: Pappelholz wird oft f√ºr Modellbau oder Flugzeuginnenr√§ume verwendet, wo Leichtigkeit z√§hlt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/pappel_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/pappel_2.jpg?raw=true" },<br>             "Weide": { info: `Weide (WE) Weidenholz ist elastisch und biegsam ‚Äì traditionell f√ºr Flechtarbeiten und K√∂rbe verwendet. Die Struktur ist fein zerstreutporig, Poren kaum markant. Verwendung: Flechtwerk, Gartenbau, leichte M√∂bel. Funfact: Weidenruten werden seit Jahrhunderten f√ºr Korbgeflechte, Z√§une und Rankhilfen genutzt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/weide_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/weide_2.jpg?raw=true" },<br>             "Linde": { info: `Linde (LI) Lindenholz ist weich, homogen und gut schnitzbar ‚Äì ideal f√ºr feine Holzarbeiten. Fein zerstreutporig und gleichm√§√üig, ohne gro√üen Porenkontrast. Verwendung: Intarsien, geschnitzte Dekors, M√∂bel, Modellbau. Funfact: Lindenholz war traditionell das Holz der Bildhauer und Orgelbauer im Mittelalter.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/linde_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/linde_2.jpg?raw=true" },<br>             "Ulme": { info: `Ulme (UL) Ulmenholz ist z√§h und eher hart ‚Äì fr√ºher oft f√ºr M√∂bel und Reparaturen verwendet. Ringporig mit markanten Poren und gelegentlichem unruhigem Faserverlauf. Verwendung: M√∂bel, Innenausbau, Reparaturholz. Funfact: Ulmenholz hat fr√ºher im Wagen- und M√∂belbau Bedeutung gehabt, besonders dort, wo Biegung gefragt war.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/ulme_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/ulme_2.jpg?raw=true" },<br>             "Kastanie": { info: `Kastanie (KA) Kastanienholz ist √§hnlich der Eiche wetterbest√§ndig, mit warmem Farbton und markanter Struktur. Ringporig mit klar sichtbaren Jahresringen und deutlichem √úbergang. Verwendung: Au√üenbau, M√∂bel, Balken, Gartenholz. Funfact: Kastanienholz wurde oft in historischen Bauwerken als wetterbest√§ndige Alternative zur Eiche verwendet.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/kastanie_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/kastanie_2.jpg?raw=true" },<br>             "Robinie": { info: `Robinie (RO) Robinienholz ist eines der h√§rtesten europ√§ischen H√∂lzer und sehr dauerhaft im Freien. Ringporig mit feinen Poren und schmalem √úbergang ‚Äì die Struktur ist weniger kontrastreich. Verwendung: Gartenholz, Terrassen, Balken, Z√§une. Funfact: Robinie wird oft als ‚Äûeurop√§isches Teak‚Äú genannt, weil es √§hnliche Eigenschaften wie Tropenholz zeigt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/robinie_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/robinie_2.jpg?raw=true" },<br>             "Hemlock": { info: `Hemlock (HE) Hemlock ist ein n√∂rdliches Nadelholz mit feiner Struktur, weich und gleichm√§√üig. Die Porenstruktur √§hnelt einfacher Zellstruktur; Jahresringe dezent sichtbar. Verwendung: Innenausbau, Paneele, Bauholz. Funfact: Hemlock wird oft im M√∂bel- und Leichtbau verwendet, wenn gutes Verh√§ltnis zwischen Gewicht und Stabilit√§t gefragt ist.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/hemlock_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/hemlock_2.jpg?raw=true" },<br>             "Zypresse": { info: `Zypresse (ZY) Zypressenholz duftet gut und ist nat√ºrlich resistent gegen Feuchtigkeit und Sch√§dlinge. Die Struktur ist fein und gleichm√§√üig, mit moderatem Porencharakter. Verwendung: Au√üen- und Gartenholz, M√∂bel, Fassaden. Funfact: Zypresse wurde in mediterranen Regionen oft zur Holzverkleidung von Kirchen und Tempeln verwendet.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/zypresse_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/zypresse_2.jpg?raw=true" },<br>             "Redwood": { info: `Redwood (RW) Redwood ist ein leichtes Tropenholz mit guter Dauerhaftigkeit und dekorativer Farbe. Zerstreutporig mit feiner Textur, Poren gleichm√§√üig verteilt. Verwendung: Au√üenholz, Z√§une, Gartenkonstruktionen. Funfact: Der K√ºstenmammutbaum (Redwood) z√§hlt zu den h√∂chsten B√§umen der Welt.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/redwood_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/redwood_2.jpg?raw=true" },<br>             "Hickory": { info: `Hickory (HI) Hickory ist ein ausgesprochen z√§hes und hartes Holz ‚Äì ideal f√ºr stark beanspruchte Teile. Ringporig mit ausgepr√§gten Poren im Fr√ºhholz und klaren Jahresringen. Verwendung: Werkzeugstiele, Sportger√§te, M√∂bel mit hoher Belastung. Funfact: Hickory war traditionell Material f√ºr Peitschen, Wurfst√∂cke und Arbeitsger√§te.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/hickory_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/hickory_2.jpg?raw=true" },<br>             "Wenge": { info: `Wenge (WE-NE) Wenge ist ein dunkles Tropenholz mit hoher H√§rte und dekorativer Maserung. Zerstreutporig mit feinen Poren ‚Äì oft Streifenzeichnung sichtbar. Verwendung: Luxusm√∂bel, Parkett, Furniere. Funfact: Wegen seiner tiefen, dunklen Farbe wird Wenge oft in Kontrasten zu hellem Holz kombiniert.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/wenge_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/wenge_2.jpg?raw=true" },<br>             "Zebrano": { info: `Zebrano (ZE-RA) Zebrano zeichnet sich durch seine markante Streifenoptik aus ‚Äì dekorativ und auff√§llig. Die Porenstruktur ist zerstreutporig, oft mit deutlichem Maserungseffekt. Verwendung: Designm√∂bel, Furniere, Dekorationen. Funfact: Zebrano wird oft f√ºr luxuri√∂se Intarsien und Furnierarbeiten verwendet.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/zebrano_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/zebrano_2.jpg?raw=true" },<br>             "Palisander": { info: `Palisander (PA) Palisanderholz ist dekorativ, fest und langlebig ‚Äì mit attraktiven Farbt√∂nen. Zerstreutporig mit feiner Struktur und gleichm√§√üiger Porenverteilung. Verwendung: Gitarren, M√∂bel, Furniere. Funfact: Palisanderholz war fr√ºher oft exklusiv f√ºr edle Musikinstrumente und Intarsien reserviert.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/palisander_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/palisander_2.jpg?raw=true" },<br>             "Ebenholz": { info: `Ebenholz (EB) Ebenholz ist eines der h√§rtesten H√∂lzer ‚Äì fast tiefschwarz und sehr dicht. Zerstreutporig mit extrem feinen Poren, kaum sichtbar ‚Äì Porenstruktur sehr fein. Verwendung: Klaviertasten, Intarsien, Luxusdekore. Funfact: Ebenholz wurde im alten √Ñgypten f√ºr Statuetten und Schmuckst√ºcke verwendet ‚Äì wegen seiner tiefen Farbe und Seltenheit.`, bildBaum: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/ebenholz_1.jpg?raw=true", bildQuerschnitt: "https://github.com/aufdemholzweg/holzquartett/blob/main/images/ebenholz_2.jpg?raw=true" }<br>        };<br>        const reflectionQuestions = [ /* ... reflectionQuestions data ... */<br>             "Stell dir vor, du sollst einen stabilen und langlebigen Esstisch f√ºr eine Familie entwerfen. ...", "Welches Holz w√ºrdest du f√ºr Gartenm√∂bel w√§hlen, ...", "Eine K√ºchenarbeitsplatte muss schnittfest und widerstandsf√§hig sein. ...", "F√ºr einen stark beanspruchten Dielenboden ...", "Du sollst den Korpus einer Akustikgitarre bauen. ...", "Fenster sind st√§ndig wechselnder Luftfeuchtigkeit ausgesetzt. ...", "F√ºr ein Modellflugzeug oder ein leichtes Regal ...", "Robinie und L√§rche sind beide f√ºr den Au√üenbereich beliebt. ...", "Du m√∂chtest einen gebogenen Handlauf ...", "Vergleiche die Rohdichte und den E-Modul von Fichte und Eiche. ...", "H√∂lzer mit hohem Quell- und Schwindma√ü ...", "Ein Hammerstiel muss extrem bruchfest ...", "Bei Eichenholz kann es in Verbindung mit Eisen ...", "Weiche H√∂lzer wie Fichte oder Kiefer ...", "F√ºr die Herstellung von dekorativen Furnieren ...", "Nenne drei heimische H√∂lzer ...", "Holz ist ein wichtiger CO‚ÇÇ-Speicher. ...", "Was bedeuten Siegel wie FSC oder PEFC ...", "Teak hat eine exzellente Dauerhaftigkeit (DK 1). ...", "Bambus ist botanisch gesehen ein Gras, ...", "Was k√∂nntest du aus einem alten Eichenbalken ...", "Du m√∂chtest ein M√∂belst√ºck mit einem starken Hell-Dunkel-Kontrast ...", "H√∂lzer wie Eiche oder Esche haben ...", "Stell dir vor, du entwirfst ein Kinderspielzeug ...", "Einige H√∂lzer wie Kirsche oder L√§rche ...", "F√ºr ein modernes, minimalistisches M√∂belst√ºck ...", "Welches Holz w√ºrdest du f√ºr den Bau einer rustikalen Almh√ºtte ...", "Du planst ein Sch√ºlerprojekt ...", "Ein Kunde w√ºnscht sich f√ºr seine Terrasse ...", "Welche Eigenschaft einer Holzart ...", "Wenn du eine neue Kategorie ...",<br>        ];<br>        const attributeInfo = { /* ... attributeInfo data ... */<br>            dk: {icon: 'üõ°Ô∏è', name: 'Dauerhaftigkeit (DK)', color: 'blue'},<br>            haerte: {icon: 'üíé', name: 'Druckfestigkeit (N/mm¬≤)', color: 'blue'},<br>            quellenSchwindenRadial: {icon: '‚ÜîÔ∏è', name: 'Quellen/Schwinden (%)', color: 'blue'},<br>            dichte: {icon: '‚öñÔ∏è', name: 'Rohdichte (kg/m¬≥)', color: 'blue'},<br>            gewicht: {icon: 'üèãÔ∏è', name: 'E-Modul (N/mm¬≤)', color: 'blue'}<br>        };<br><br>        // --- Modified aiGame state ---<br>        let aiGame = { playerName: '', playerCards: [], aiCards: [], currentPlayerCard: null, currentAiCard: null, roundInProgress: false, turn: 'player' };<br><br>        // ===== Auth + Deep Link Join =====<br>        document.addEventListener('DOMContentLoaded', async () => { /* ... DOMContentLoaded listener ... */<br>            try { await signInAnonymously(auth); } catch (e) { console.error("Firebase Auth Error:", e); }<br>            onAuthStateChanged(auth, (user) => {<br>                if (user) {<br>                    localPlayerId = user.uid;<br>                    const urlParams = new URLSearchParams(window.location.search);<br>                    const gameIdFromUrl = urlParams.get('game');<br>                    if (gameIdFromUrl) {<br>                        gameId = gameIdFromUrl;<br>                        gameMode = 'multiplayer';<br>                        window.showNamePrompt('join');<br>                    }<br>                }<br>            });<br>         });<br>        window.addEventListener('beforeunload', async () => { /* ... beforeunload listener ... */<br>             if (gameMode === 'multiplayer' && gameId && localPlayerId) {<br>                const gameRef = doc(db, "games", gameId);<br>                const playerStatusPath = `players.${localPlayerId}.status`;<br>                await updateDoc(gameRef, { [playerStatusPath]: "offline" }).catch(() => {});<br>            }<br>        });<br><br>        // ===== UI Control =====<br>        window.showNamePrompt = (mode) => { /* ... showNamePrompt function ... */<br>             document.getElementById('setupModal').classList.add('hidden');<br>            const nameModal = document.getElementById('nameModal');<br>            nameModal.classList.remove('hidden');<br>            const nameSubmitButton = document.getElementById('nameSubmitButton');<br>            const newButton = nameSubmitButton.cloneNode(true);<br>            nameSubmitButton.parentNode.replaceChild(newButton, nameSubmitButton);<br>            newButton.addEventListener('click', () => {<br>                const playerName = document.getElementById('playerName').value.trim();<br>                if (!playerName) { alert('Bitte gib deinen Namen ein!'); return; }<br>                nameModal.classList.add('hidden');<br>                if (mode === 'ai') { gameMode = 'ai'; startGameAI(playerName); }<br>                else if (mode === 'multiplayer') { gameMode = 'multiplayer'; createGame(playerName); }<br>                else if (mode === 'join') { joinGame(gameId, playerName); }<br>            });<br>        };<br>        window.copyShareLink = async () => { /* ... copyShareLink function ... */<br>             const linkInput = document.getElementById('shareLink');<br>            try { await navigator.clipboard.writeText(linkInput.value); }<br>            catch (err) { linkInput.select(); document.execCommand('copy'); }<br>            hasCopiedShareLink = true;<br>            const statusEl = document.getElementById('lobbyStatus');<br>            if (statusEl) statusEl.textContent = 'Link kopiert. Warte auf Mitspieler...';<br>            if (localGameState && (localGameState.status === 'playing' || localGameState.status === 'finished')) {<br>                document.getElementById('multiplayerLobbyModal').classList.add('hidden');<br>                document.getElementById('gameContainer').classList.remove('hidden');<br>                updateMultiplayerUI(localGameState);<br>            }<br>        };<br><br>        // ===== Multiplayer Logic =====<br>        async function createGame(playerName) { /* ... createGame function ... */<br>            const lobbyModal = document.getElementById('multiplayerLobbyModal');<br>            lobbyModal.classList.remove('hidden');<br>            hasCopiedShareLink = false;<br>            gameId = Math.random().toString(36).substring(2, 8).toUpperCase();<br>            const shareLinkInput = document.getElementById('shareLink');<br>            const baseUrl = window.location.href.split('?')[0];<br>            shareLinkInput.value = `${baseUrl}?game=${gameId}`;<br>            const gameRef = doc(db, "games", gameId);<br>            const initialGameData = { gameId: gameId, status: 'waiting', playerIds: [localPlayerId], players: { [localPlayerId]: { name: playerName, cards: [], status: 'online' } }, createdAt: serverTimestamp() };<br>            try { await setDoc(gameRef, initialGameData); listenToGameChanges(); }<br>            catch (error) { console.error("Error creating game:", error); alert("Fehler beim Erstellen des Spiels."); }<br>        }<br>        async function joinGame(gameIdToJoin, playerName) { /* ... joinGame function ... */<br>            const gameRef = doc(db, "games", gameIdToJoin);<br>            try {<br>                const gameSnap = await getDoc(gameRef);<br>                if (gameSnap.exists() && gameSnap.data().status === 'waiting' && gameSnap.data().playerIds.length === 1) {<br>                    document.getElementById('lobbyTitle').textContent = "Spiel wird beigetreten...";<br>                    document.getElementById('lobbyText').textContent = "Moment, die Karten werden gemischt.";<br>                    document.getElementById('multiplayerLobbyModal').classList.remove('hidden');<br>                    hasCopiedShareLink = true;<br>                    const shuffledCards = shuffleArray([...woodCards]);<br>                    const player1Id = gameSnap.data().playerIds[0];<br>                    const player1Cards = shuffledCards.slice(0, 15);<br>                    const player2Cards = shuffledCards.slice(15, 30);<br>                    const gameUpdateData = { status: 'playing', playerIds: [player1Id, localPlayerId], [`players.${localPlayerId}`]: { name: playerName, cards: player2Cards, status: 'online' }, [`players.${player1Id}.cards`]: player1Cards, turn: player1Id, currentCards: { [player1Id]: player1Cards[0], [localPlayerId]: player2Cards[0] }, lastResult: null, lastActivity: serverTimestamp() };<br>                    await updateDoc(gameRef, gameUpdateData);<br>                    listenToGameChanges();<br>                } else { alert("Spiel nicht gefunden, bereits voll oder beendet."); window.location.search = ''; }<br>            } catch (error) { console.error("Error joining game:", error); alert("Fehler beim Beitreten zum Spiel."); window.location.search = ''; }<br>        }<br>        function listenToGameChanges() { /* ... listenToGameChanges function ... */<br>             if (!gameId) return;<br>            const gameRef = doc(db, "games", gameId);<br>            unsubscribeGame = onSnapshot(gameRef, (docSnap) => {<br>                if (!docSnap.exists()) { if(gameMode === 'multiplayer'){ alert("Das Spiel wurde beendet oder gel√∂scht."); resetGame(); } return; }<br>                const gameData = docSnap.data();<br>                localGameState = gameData;<br>                if (gameData.status === 'playing' || gameData.status === 'finished') {<br>                    if (hasCopiedShareLink || gameData.playerIds.includes(localPlayerId) && gameData.playerIds.length === 2) { document.getElementById('multiplayerLobbyModal').classList.add('hidden'); document.getElementById('gameContainer').classList.remove('hidden'); updateMultiplayerUI(gameData); }<br>                    else if (!hasCopiedShareLink && gameData.playerIds.length === 2){ const statusEl = document.getElementById('lobbyStatus'); if (statusEl) statusEl.textContent = 'Mitspieler ist beigetreten! Klicke ‚ÄûLink kopieren‚Äú, um zu starten.'; }<br>                } else if (gameData.status === 'waiting') { document.getElementById('multiplayerLobbyModal').classList.remove('hidden'); document.getElementById('gameContainer').classList.add('hidden'); }<br>                const opponentId = gameData.playerIds?.find(id => id !== localPlayerId);<br>                if (opponentId && gameData.players[opponentId]?.status === 'offline') { /* console.log('Opponent appears offline.'); */ }<br>            }, (error) => { console.error("Error listening to game changes:", error); });<br>        }<br>        <br>        // --- Modified updateMultiplayerUI (added 'lose' sound) ---<br>        function updateMultiplayerUI(gameData) {<br>            if (!gameData || !gameData.players || !gameData.playerIds) { console.error("Incomplete game data received:", gameData); return; }<br>            const opponentId = gameData.playerIds.find(id => id !== localPlayerId);<br>            document.getElementById('playerNameDisplay').textContent = gameData.players[localPlayerId]?.name || 'Du';<br>            document.getElementById('playerCards').textContent = gameData.players[localPlayerId]?.cards?.length ?? '?';<br>            if (opponentId && gameData.players[opponentId]) { document.getElementById('opponentNameDisplay').textContent = gameData.players[opponentId].name; document.getElementById('aiCards').textContent = gameData.players[opponentId].cards?.length ?? '?'; }<br>            else { document.getElementById('opponentNameDisplay').textContent = "Wartet..."; document.getElementById('aiCards').textContent = '-'; }<br>            updateStatusBar(gameData.players[localPlayerId]?.cards?.length ?? 0, gameData.players[opponentId]?.cards?.length ?? 0);<br>            displayMultiplayerCards(gameData);<br>            const turnIndicator = document.getElementById('turnIndicator');<br>            const attributeSelection = document.getElementById('attributeSelection');<br>            const resultDisplay = document.getElementById('resultDisplay');<br>            const nextRoundBtn = document.getElementById('nextRoundButton');<br>            turnIndicator.classList.remove('hidden');<br>            if (gameData.lastResult) {<br>                if (!roundSoundPlayed) { <br>                    roundSoundPlayed = true; <br>                    playSound(sounds.flip); <br>                    if (gameData.lastResult.winnerId === localPlayerId) {<br>                        playSound(sounds.win);<br>                    } else if (gameData.lastResult.winnerId !== 'tie') { // <<< NEU<br>                         playSound(sounds.lose); // <<< NEU<br>                    }<br>                }<br>                attributeSelection.classList.add('hidden');<br>                resultDisplay.classList.remove('hidden');<br>                nextRoundBtn.classList.remove('hidden');<br>                const { winnerId, attribute, values } = gameData.lastResult;<br>                const opponentActualId = opponentId || 'opponent';<br>                const winnerName = winnerId === localPlayerId ? 'Du' : (winnerId === 'tie' ? '' : gameData.players[winnerId]?.name || 'Gegner');<br>                let resultText = winnerId === 'tie' ? `ü§ù Unentschieden!` : `üéâ ${winnerName} gewinnt!`;<br>                if (winnerId !== localPlayerId && winnerId !== 'tie') { resultText = `üòû ${winnerName} gewinnt!`; }<br>                let resultDetailsText = `${attributeInfo[attribute]?.name.split(' (')[0] || attribute}: ${values[localPlayerId]?.toLocaleString('de-DE') ?? '?'} vs ${values[opponentActualId]?.toLocaleString('de-DE') ?? '?'}`;<br>                document.getElementById('resultText').textContent = resultText;<br>                document.getElementById('resultDetails').textContent = resultDetailsText;<br>                const attributeIndex = Object.keys(attributeInfo).indexOf(attribute);<br>                if (attributeIndex !== -1) {<br>                    const playerRow = document.querySelector(`#playerCard .space-y-1 > *:nth-child(${attributeIndex + 1})`);<br>                    const opponentRow = document.querySelector(`#aiCard .space-y-1 > *:nth-child(${attributeIndex + 1})`);<br>                    const highlightClass = 'bg-yellow-200';<br>                    const playerCurrentBg = playerRow?.classList.toString().match(/bg-(amber|gray|yellow)-[0-9]+/)?.[0];<br>                    const opponentCurrentBg = opponentRow?.classList.toString().match(/bg-(amber|gray|yellow)-[0-9]+/)?.[0];<br>                    if (playerRow) { if (playerCurrentBg) playerRow.classList.remove(playerCurrentBg); playerRow.classList.add(highlightClass); }<br>                    if (opponentRow) { if (opponentCurrentBg) opponentRow.classList.remove(opponentCurrentBg); opponentRow.classList.add(highlightClass); }<br>                }<br>                const playerCardElement = document.getElementById('playerCard')?.querySelector('.card-front');<br>                const aiCardElement = document.getElementById('aiCard')?.querySelector('.card-front');<br>                const statusBarElement = document.getElementById('statusBar');<br>                playerCardElement?.classList.remove('animate-glow-win', 'animate-glow-lose');<br>                aiCardElement?.classList.remove('animate-glow-win', 'animate-glow-lose');<br>                if (winnerId === localPlayerId) { playerCardElement?.classList.add('animate-glow-win'); if (statusBarElement) { statusBarElement.classList.add('status-flash-win'); setTimeout(() => statusBarElement.classList.remove('status-flash-win'), 1200); } triggerWinStarAnimation(); }<br>                else if (winnerId !== 'tie') { playerCardElement?.classList.add('animate-glow-lose'); aiCardElement?.classList.add('animate-glow-win'); if (statusBarElement) { statusBarElement.classList.add('status-flash-lose'); setTimeout(() => statusBarElement.classList.remove('status-flash-lose'), 1200); } }<br>                window.scrollTo({ top: 0, behavior: 'smooth' }); // <<< SCROLL MULTIPLAYER<br>            } else {<br>                 roundSoundPlayed = false;<br>                resultDisplay.classList.add('hidden');<br>                nextRoundBtn.classList.add('hidden');<br>                if (gameData.turn === localPlayerId) { turnIndicator.textContent = "Du bist am Zug!"; turnIndicator.className = 'text-sm font-semibold p-1 text-green-600'; attributeSelection.classList.remove('hidden'); }<br>                else { turnIndicator.textContent = `${gameData.players[gameData.turn]?.name || 'Gegner'} ist am Zug...`; turnIndicator.className = 'text-sm font-semibold p-1 text-gray-500'; attributeSelection.classList.add('hidden'); }<br>            }<br>             if (gameData.status === 'finished') { endGame(); }<br>        }<br>        function updateStatusBar(playerCount, opponentCount) { /* ... updateStatusBar unchanged ... */<br>             const total = playerCount + opponentCount; const playerPercentage = total > 0 ? (playerCount / total) * 100 : 50; const statusBar = document.getElementById('statusBar'); if (statusBar) { statusBar.style.width = `${playerPercentage}%`; let color = '#f59e0b'; if (playerPercentage < 25) color = '#ef4444'; else if (playerPercentage < 45) color = '#f97316'; else if (playerPercentage > 75) color = '#22c55e'; else if (playerPercentage > 55) color = '#84cc16'; statusBar.style.backgroundColor = color; }<br>        }<br>        function displayMultiplayerCards(gameData) { /* ... displayMultiplayerCards unchanged ... */<br>            if (!gameData.currentCards || !gameData.playerIds) return; const opponentId = gameData.playerIds.find(id => id !== localPlayerId); const playerCardContainer = document.getElementById('playerCard'); const aiCardContainer = document.getElementById('aiCard'); playerCardContainer.innerHTML = ''; aiCardContainer.innerHTML = ''; const showOpponentCardFace = !!gameData.lastResult; if(gameData.currentCards[localPlayerId]) { const playerCard = createCard(gameData.currentCards[localPlayerId], true, true); playerCardContainer.appendChild(playerCard); } else { playerCardContainer.innerHTML = `<div class="card-front bg-gray-200 ...">Warte auf Karte...</div>`; } if (opponentId && gameData.currentCards[opponentId]) { const aiCard = createCard(gameData.currentCards[opponentId], showOpponentCardFace, false); aiCardContainer.appendChild(aiCard); } else if (gameData.playerIds.length < 2) { aiCardContainer.innerHTML = `<div class="card-front bg-gray-200 ...">Wartet auf Spieler 2...</div>`; } else { const dummyOpponentCardData = { name: "Gegner", dk: '?', haerte: '?', quellenSchwindenRadial: '?', dichte: '?', gewicht: '?' }; const aiCard = createCard(dummyOpponentCardData, false, false); aiCardContainer.appendChild(aiCard); }<br>        }<br>        async function multiplayerSelectAttribute(attribute) { /* ... multiplayerSelectAttribute unchanged ... */<br>             if (!localGameState || localGameState.turn !== localPlayerId || localGameState.lastResult || !attributeInfo[attribute]) return; const playerCard = localGameState.currentCards?.[localPlayerId]; const opponentId = localGameState.playerIds?.find(id => id !== localPlayerId); if (!opponentId || !localGameState.currentCards?.[opponentId]) { console.warn("Opponent or opponent card not ready."); return; } const opponentCard = localGameState.currentCards[opponentId]; const playerValue = playerCard?.[attribute]; const opponentValue = opponentCard?.[attribute]; if (playerValue === undefined || opponentValue === undefined) { console.error("Attribute value missing for comparison:", attribute); return; } let playerWins; if (attribute === 'quellenSchwindenRadial' || attribute === 'dk') { if (playerValue < opponentValue) playerWins = true; else if (opponentValue < playerValue) playerWins = false; else playerWins = 'tie'; } else { if (playerValue > opponentValue) playerWins = true; else if (opponentValue > playerValue) playerWins = false; else playerWins = 'tie'; } const winnerId = playerWins === 'tie' ? 'tie' : (playerWins ? localPlayerId : opponentId); const gameUpdate = { lastResult: { winnerId, attribute, values: { [localPlayerId]: playerValue, [opponentId]: opponentValue } }, lastActivity: serverTimestamp() }; try { await updateDoc(doc(db, "games", gameId), gameUpdate); } catch (error) { console.error("Error selecting attribute:", error); }<br>        }<br>        async function multiplayerNextRound() { /* ... multiplayerNextRound unchanged ... */<br>            const pf = document.getElementById('playerCard')?.querySelector('.card-front'); if (pf) pf.classList.remove('animate-glow-win', 'animate-glow-lose'); const af = document.getElementById('aiCard')?.querySelector('.card-front'); if (af) af.classList.remove('animate-glow-win', 'animate-glow-lose'); document.querySelectorAll('#playerCard .space-y-1 > *, #aiCard .space-y-1 > *').forEach(el => { el.classList.remove('bg-yellow-200', 'bg-gray-300'); }); if (!localGameState || !localGameState.lastResult || !gameId) { console.log("Next round conditions not met."); return; } try { const currentGameState = localGameState; if (!currentGameState.lastResult) { console.log("Result already processed, likely by other player."); return; } const currentWinnerId = currentGameState.lastResult.winnerId; const [player1Id, player2Id] = currentGameState.playerIds; if (!currentGameState.players?.[player1Id]?.cards || !currentGameState.players?.[player2Id]?.cards) { console.error("Player card data missing in game state for next round."); return; } let p1Cards = [...currentGameState.players[player1Id].cards]; let p2Cards = [...currentGameState.players[player2Id].cards]; if (p1Cards.length === 0 && p2Cards.length === 0 && currentGameState.status !== 'finished') { console.error("Both players have no cards, but game not finished. Setting to finished."); await updateDoc(doc(db, "games", gameId), { status: 'finished', lastResult: null }); return; } const p1Card = p1Cards.shift(); const p2Card = p2Cards.shift(); if (currentWinnerId === player1Id) { if (p1Card) p1Cards.push(p1Card); if (p2Card) p1Cards.push(p2Card); } else if (currentWinnerId === player2Id) { if (p1Card) p2Cards.push(p1Card); if (p2Card) p2Cards.push(p2Card); } else { if (p1Card) p1Cards.push(p1Card); if (p2Card) p2Cards.push(p2Card); } if (p1Cards.length === 0 || p2Cards.length === 0) { console.log("Game over condition met."); await updateDoc(doc(db, "games", gameId), { status: 'finished', 'players': { [player1Id]: { ...currentGameState.players[player1Id], cards: p1Cards }, [player2Id]: { ...currentGameState.players[player2Id], cards: p2Cards } }, currentCards: { [player1Id]: null, [player2Id]: null }, lastResult: null }); return; } const nextTurn = currentWinnerId === 'tie' ? currentGameState.turn : currentWinnerId; const gameUpdate = { 'lastResult': null, 'turn': nextTurn, 'players': { [player1Id]: { ...currentGameState.players[player1Id], cards: p1Cards }, [player2Id]: { ...currentGameState.players[player2Id], cards: p2Cards } }, 'currentCards': { [player1Id]: p1Cards[0] || null, [player2Id]: p2Cards[0] || null }, 'lastActivity': serverTimestamp() }; console.log("Updating Firebase for next round:", gameUpdate); await updateDoc(doc(db, "games", gameId), gameUpdate); } catch (error) { console.error("Error processing multiplayer next round:", error); }<br>        }<br><br><br>        // ===== Controller for both modes =====<br>        window.selectAttribute = function(attribute) { /* ... selectAttribute controller ... */<br>            if (gameMode === 'ai') { selectAttributeAI(attribute); }<br>            else if (gameMode === 'multiplayer') { multiplayerSelectAttribute(attribute); }<br>        };<br>        window.nextRound = function() { /* ... nextRound controller ... */<br>             if (gameMode === 'ai') { nextRoundAI(); }<br>             else if (gameMode === 'multiplayer') { multiplayerNextRound(); }<br>        };<br><br>        // ===== AI Mode Logic =====<br>        function shuffleArray(array) { /* ... shuffleArray function ... */<br>             const shuffled = [...array]; for (let i = shuffled.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]]; } return shuffled;<br>        }<br><br>        // --- Modified startGameAI (Added turn init) ---<br>        function startGameAI(playerName) {<br>            aiGame.playerName = playerName;<br>            document.getElementById('playerNameDisplay').textContent = playerName;<br>            document.getElementById('opponentNameDisplay').textContent = 'Computer';<br>            const shuffledCards = shuffleArray(woodCards);<br>            aiGame.playerCards = shuffledCards.slice(0, 15);<br>            aiGame.aiCards = shuffledCards.slice(15, 30);<br>            aiGame.currentPlayerCard = aiGame.playerCards[0];<br>            aiGame.currentAiCard = aiGame.aiCards[0];<br>            aiGame.roundInProgress = false;<br>            aiGame.turn = 'player'; // Player starts<br><br>            // Reset UI states<br>            document.getElementById('attributeSelection').classList.remove('hidden'); // Show selection initially<br>            document.getElementById('resultDisplay').classList.add('hidden');<br>            document.getElementById('nextRoundButton').classList.add('hidden');<br>            document.getElementById('turnIndicator').classList.remove('hidden'); // Show indicator area<br><br><br>            document.getElementById('gameContainer').classList.remove('hidden');<br>            window.scrollTo(0, 0);<br>            updateDisplayAI(); // Update card counts and turn indicator<br>            displayCardsAI();<br>        }<br><br>       // --- Modified createCard (checks aiGame.turn, updated header layout, shortened label) ---<br>        function createCard(cardData, isRevealed = true, isPlayer = true) {<br>            const card = document.createElement('div');<br>            card.className = `card-3d w-full h-full relative ${isPlayer ? 'cursor-pointer hover-lift' : ''} transition-all duration-300`;<br>            if (!isRevealed) { card.classList.add('card-flipped'); }<br>            const borderColor = isPlayer ? 'border-amber-400' : 'border-gray-300';<br>            const shadow = isPlayer ? 'shadow-lg' : 'shadow-md';<br>            const cardFront = document.createElement('div');<br>            cardFront.className = `card-front card-background rounded-xl ${shadow} border-2 ${borderColor} p-2 sm:p-3 flex flex-col overflow-hidden`;<br>            const canSelectAttributes = isPlayer && ((gameMode === 'ai' && !aiGame.roundInProgress && aiGame.turn === 'player') || (gameMode === 'multiplayer' && localGameState?.turn === localPlayerId && !localGameState?.lastResult));<br>            const showInfoButton = isPlayer && ((gameMode === 'ai' && aiGame.roundInProgress) || (gameMode === 'multiplayer' && !!localGameState?.lastResult));<br>            const cardName = cardData?.name || 'Unbekannt';<br>            const safeCardNameId = cardName.replace(/[^a-zA-Z0-9]/g, '-') || 'unknown';<br>            let headerRightContent = '';<br>            if (isPlayer) {<br>                 const woodData = woodInfo[cardName] || {};<br>                 const treeImage = woodData.bildBaum || 'https://placehold.co/36x36/d1d5db/374151?text=?';<br>                 headerRightContent = `<div class="flex-shrink-0 relative w-8 h-8 sm:w-9 sm:w-9"><img src="${treeImage}" alt="${cardName}" id="wood-image-icon-${safeCardNameId}" class="${showInfoButton ? 'hidden' : ''} absolute inset-0 w-full h-full object-cover rounded-full border-2 border-amber-200"><button id="player-info-button-${safeCardNameId}" onclick="window.showWoodInfo('${cardName.replace(/'/g, "\\'")}')" class="${showInfoButton ? '' : 'hidden'} absolute inset-0 bg-purple-600 text-white rounded-full flex items-center justify-center text-lg hover:bg-purple-700 z-10">üí°</button></div>`;<br>             }<br>            let attributeHTML = '<div class="space-y-1 mt-auto">';<br>            for (const attrKey in attributeInfo) {<br>                if (Object.hasOwnProperty.call(attributeInfo, attrKey)) {<br>                    const attr = attributeInfo[attrKey]; const value = cardData?.[attrKey] ?? '?'; const formattedValue = typeof value === 'number' ? value.toLocaleString('de-DE') : value; const valueUnit = attr.name.match(/\(([^)]+)\)/); const unitText = valueUnit ? `<span class="block text-[10px] sm:text-xs text-gray-500 leading-tight">${valueUnit[0]}</span>` : ''; const nameText = attr.name.replace(/\s*\(([^)]+)\)/, '');<br>                    // <<< MODIFIED: Shortened label for quellenSchwindenRadial >>><br>                    const displayName = (attrKey === 'quellenSchwindenRadial') ? 'Quellen/Schw.' : nameText;<br>                    const baseBgClass = canSelectAttributes ? 'bg-amber-100' : 'bg-amber-50'; const hoverBgClass = canSelectAttributes ? 'hover:bg-amber-200' : ''; const borderClass = canSelectAttributes ? 'border-amber-600' : 'border-amber-300'; const textClass = canSelectAttributes ? 'text-amber-700' : 'text-amber-800'; const commonClasses = `w-full flex justify-between items-center py-0.5 sm:py-1 px-1 rounded-lg text-left border ${borderClass} ${baseBgClass}`; const interactiveClasses = `${hoverBgClass} transition-colors`;<br>                    if (canSelectAttributes) { attributeHTML += `<button onclick="window.selectAttribute('${attrKey}')" class="${commonClasses} ${interactiveClasses}"><div class="flex items-center space-x-1 sm:space-x-2"><span class="text-xs sm:text-sm">${attr.icon}</span><div><span class="text-[11px] sm:text-xs font-medium leading-tight">${displayName}</span>${unitText}</div></div><span class="font-semibold ${textClass} text-sm sm:text-base">${formattedValue}</span></button>`; } // Used displayName<br>                    else { attributeHTML += `<div class="${commonClasses}"><div class="flex items-center space-x-1 sm:space-x-2"><span class="text-xs sm:text-sm">${attr.icon}</span><div><span class="text-[11px] sm:text-xs font-medium leading-tight text-gray-700">${displayName}</span>${unitText}</div></div><span class="font-semibold ${textClass} text-sm sm:text-base">${formattedValue}</span></div>`; } // Used displayName<br>                }<br>            } attributeHTML += '</div>';<br>            cardFront.innerHTML = `<div class="flex justify-between items-center w-full mb-2 px-1 h-9 sm:h-10"><h3 class="text-base sm:text-lg font-bold text-amber-800 truncate text-left mr-2">${cardName}</h3>${headerRightContent}</div>${attributeHTML}`;<br>            const cardBack = document.createElement('div'); cardBack.className = 'card-back rounded-xl shadow-lg border-2 border-amber-300 flex items-center justify-center relative overflow-hidden';<br>            card.appendChild(cardFront); card.appendChild(cardBack); return card;<br>        }<br><br><br>        function displayCardsAI() { /* ... displayCardsAI unchanged ... */<br>            const playerCardContainer = document.getElementById('playerCard'); const aiCardContainer = document.getElementById('aiCard'); playerCardContainer.innerHTML = ''; aiCardContainer.innerHTML = ''; if (aiGame.currentPlayerCard) { playerCardContainer.appendChild(createCard(aiGame.currentPlayerCard, true, true)); } else { playerCardContainer.innerHTML = `<div class="card-front bg-gray-200 ...">Keine Karte</div>`; } if (aiGame.currentAiCard) { const revealAICard = aiGame.roundInProgress; aiCardContainer.appendChild(createCard(aiGame.currentAiCard, revealAICard, false)); } else { aiCardContainer.innerHTML = `<div class="card-front bg-gray-200 ...">Keine Karte</div>`; }<br>        }<br><br>        // --- Modified selectAttributeAI (added 'lose' sound) ---<br>        function selectAttributeAI(attribute) {<br>            if (aiGame.roundInProgress || aiGame.turn !== 'player' || !aiGame.currentPlayerCard || !aiGame.currentAiCard || !attributeInfo[attribute]) return;<br>            aiGame.roundInProgress = true;<br>            const playerValue = aiGame.currentPlayerCard[attribute];<br>            const aiValue = aiGame.currentAiCard[attribute];<br>            if (playerValue === undefined || aiValue === undefined) { console.error("AI Mode: Attribute value missing for comparison:", attribute); aiGame.roundInProgress = false; return; }<br>            const aiCardElement = document.getElementById('aiCard').querySelector('.card-3d');<br>            if (aiCardElement) { aiCardElement.classList.remove('card-flipped'); playSound(sounds.flip); }<br>            let playerWins;<br>            if (attribute === 'quellenSchwindenRadial' || attribute === 'dk') { if (playerValue < aiValue) playerWins = true; else if (aiValue < playerValue) playerWins = false; else playerWins = 'tie'; }<br>            else { if (playerValue > aiValue) playerWins = true; else if (aiValue > playerValue) playerWins = false; else playerWins = 'tie'; }<br>            const playerCardToMove = aiGame.playerCards.shift(); const aiCardToMove = aiGame.aiCards.shift(); let winnerTurn = aiGame.turn;<br>            if (playerWins === true) { if (playerCardToMove) aiGame.playerCards.push(playerCardToMove); if (aiCardToMove) aiGame.playerCards.push(aiCardToMove); winnerTurn = 'player'; }<br>            else if (playerWins === false) { if (aiCardToMove) aiGame.aiCards.push(aiCardToMove); if (playerCardToMove) aiGame.aiCards.push(playerCardToMove); winnerTurn = 'ai'; }<br>            else { if (playerCardToMove) aiGame.playerCards.push(playerCardToMove); if (aiCardToMove) aiGame.aiCards.push(aiCardToMove); }<br>            aiGame.turn = winnerTurn;<br>            setTimeout(() => {<br>                 displayCardsAI();<br>                 let resultText, resultClass; const playerCardFront = document.getElementById('playerCard')?.querySelector('.card-front'); const aiCardFront = document.getElementById('aiCard')?.querySelector('.card-front'); const statusBar = document.getElementById('statusBar');<br>                const attributeIndex = Object.keys(attributeInfo).indexOf(attribute);<br>                 if (attributeIndex !== -1) { const playerRow = playerCardFront?.querySelector(`.space-y-1 > *:nth-child(${attributeIndex + 1})`); const opponentRow = aiCardFront?.querySelector(`.space-y-1 > *:nth-child(${attributeIndex + 1})`); const highlightClass = 'bg-yellow-200'; const playerCurrentBg = playerRow?.classList.toString().match(/bg-(amber|gray|yellow)-[0-9]+/)?.[0]; const opponentCurrentBg = opponentRow?.classList.toString().match(/bg-(amber|gray|yellow)-[0-9]+/)?.[0]; if (playerRow) { if (playerCurrentBg) playerRow.classList.remove(playerCurrentBg); playerRow.classList.add(highlightClass); } if (opponentRow) { if (opponentCurrentBg) opponentRow.classList.remove(opponentCurrentBg); opponentRow.classList.add(highlightClass); } }<br>                if (playerWins === true) { resultText = `üéâ Du gewinnst!`; resultClass = 'text-green-600'; playerCardFront?.classList.add('animate-glow-win'); if (statusBar) { statusBar.classList.add('status-flash-win'); setTimeout(() => statusBar.classList.remove('status-flash-win'), 1200); } triggerWinStarAnimation(); playSound(sounds.win); }<br>                else if (playerWins === false) { resultText = `üòû KI gewinnt!`; resultClass = 'text-red-600'; playerCardFront?.classList.add('animate-glow-lose'); aiCardFront?.classList.add('animate-glow-win'); if (statusBar) { statusBar.classList.add('status-flash-lose'); setTimeout(() => statusBar.classList.remove('status-flash-lose'), 1200); } playSound(sounds.lose); } // <<< 'lose' sound<br>                else { resultText = `ü§ù Unentschieden!`; resultClass = 'text-yellow-600'; }<br>                document.getElementById('resultText').textContent = resultText; document.getElementById('resultText').className = `text-lg sm:text-xl font-bold ${resultClass}`; document.getElementById('resultDetails').textContent = `${attributeInfo[attribute].name.split(' (')[0]}: ${playerValue.toLocaleString('de-DE')} vs ${aiValue.toLocaleString('de-DE')}`; document.getElementById('attributeSelection').classList.add('hidden'); document.getElementById('resultDisplay').classList.remove('hidden'); document.getElementById('nextRoundButton').classList.remove('hidden');<br>                updateDisplayAI(); checkGameOverAI();<br>                window.scrollTo({ top: 0, behavior: 'smooth' });<br>            }, 600);<br>        }<br><br>        // --- Modified aiSelectAttribute (added 'lose' sound) ---<br>        function aiSelectAttribute() {<br>            if (aiGame.roundInProgress || aiGame.turn !== 'ai' || !aiGame.currentPlayerCard || !aiGame.currentAiCard) return;<br>            aiGame.roundInProgress = true;<br>            setTimeout(() => {<br>                const availableAttributes = Object.keys(attributeInfo); const randomIndex = Math.floor(Math.random() * availableAttributes.length); const chosenAttribute = availableAttributes[randomIndex]; console.log(`AI chose: ${chosenAttribute}`);<br>                const playerValue = aiGame.currentPlayerCard[chosenAttribute]; const aiValue = aiGame.currentAiCard[chosenAttribute];<br>                if (playerValue === undefined || aiValue === undefined) { console.error("AI Mode (AI Turn): Attribute value missing for comparison:", chosenAttribute); aiGame.roundInProgress = false; nextRoundAI(); return; }<br>                let playerWins; if (chosenAttribute === 'quellenSchwindenRadial' || chosenAttribute === 'dk') { if (playerValue < aiValue) playerWins = true; else if (aiValue < playerValue) playerWins = false; else playerWins = 'tie'; } else { if (playerValue > aiValue) playerWins = true; else if (aiValue > playerValue) playerWins = false; else playerWins = 'tie'; }<br>                const playerCardToMove = aiGame.playerCards.shift(); const aiCardToMove = aiGame.aiCards.shift(); let winnerTurn = aiGame.turn;<br>                if (playerWins === true) { if (playerCardToMove) aiGame.playerCards.push(playerCardToMove); if (aiCardToMove) aiGame.playerCards.push(aiCardToMove); winnerTurn = 'player'; }<br>                else if (playerWins === false) { if (aiCardToMove) aiGame.aiCards.push(aiCardToMove); if (playerCardToMove) aiGame.aiCards.push(playerCardToMove); winnerTurn = 'ai'; }<br>                else { if (playerCardToMove) aiGame.playerCards.push(playerCardToMove); if (aiCardToMove) aiGame.aiCards.push(aiCardToMove); }<br>                aiGame.turn = winnerTurn;<br>                displayCardsAI();<br>                let resultText, resultClass; const playerCardFront = document.getElementById('playerCard')?.querySelector('.card-front'); const aiCardFront = document.getElementById('aiCard')?.querySelector('.card-front'); const statusBar = document.getElementById('statusBar');<br>                const attributeIndex = Object.keys(attributeInfo).indexOf(chosenAttribute);<br>                 if (attributeIndex !== -1) { const playerRow = playerCardFront?.querySelector(`.space-y-1 > *:nth-child(${attributeIndex + 1})`); const opponentRow = aiCardFront?.querySelector(`.space-y-1 > *:nth-child(${attributeIndex + 1})`); const highlightClass = 'bg-yellow-200'; const playerCurrentBg = playerRow?.classList.toString().match(/bg-(amber|gray|yellow)-[0-9]+/)?.[0]; const opponentCurrentBg = opponentRow?.classList.toString().match(/bg-(amber|gray|yellow)-[0-9]+/)?.[0]; if (playerRow) { if (playerCurrentBg) playerRow.classList.remove(playerCurrentBg); playerRow.classList.add(highlightClass); } if (opponentRow) { if (opponentCurrentBg) opponentRow.classList.remove(opponentCurrentBg); opponentRow.classList.add(highlightClass); } }<br>                 if (playerWins === true) { resultText = `üéâ Du gewinnst!`; resultClass = 'text-green-600'; playerCardFront?.classList.add('animate-glow-win'); aiCardFront?.classList.add('animate-glow-lose'); if (statusBar) { statusBar.classList.add('status-flash-win'); setTimeout(() => statusBar.classList.remove('status-flash-win'), 1200); } triggerWinStarAnimation(); playSound(sounds.win); }<br>                 else if (playerWins === false) { resultText = `üòû KI gewinnt!`; resultClass = 'text-red-600'; playerCardFront?.classList.add('animate-glow-lose'); aiCardFront?.classList.add('animate-glow-win'); if (statusBar) { statusBar.classList.add('status-flash-lose'); setTimeout(() => statusBar.classList.remove('status-flash-lose'), 1200); } playSound(sounds.lose); } // <<< 'lose' sound<br>                 else { resultText = `ü§ù Unentschieden!`; resultClass = 'text-yellow-600'; }<br>                document.getElementById('resultText').textContent = resultText; document.getElementById('resultText').className = `text-lg sm:text-xl font-bold ${resultClass}`; document.getElementById('resultDetails').textContent = `${attributeInfo[chosenAttribute].name.split(' (')[0]}: ${playerValue.toLocaleString('de-DE')} vs ${aiValue.toLocaleString('de-DE')}`; document.getElementById('attributeSelection').classList.add('hidden'); document.getElementById('resultDisplay').classList.remove('hidden'); document.getElementById('nextRoundButton').classList.remove('hidden');<br>                updateDisplayAI(); checkGameOverAI();<br>                window.scrollTo({ top: 0, behavior: 'smooth' });<br>            }, 1500);<br>        }<br><br>        // --- Modified nextRoundAI (checks turn, calls aiSelectAttribute) ---<br>        function nextRoundAI() {<br>             const pf = document.getElementById('playerCard')?.querySelector('.card-front'); if (pf) pf.classList.remove('animate-glow-win', 'animate-glow-lose'); const af = document.getElementById('aiCard')?.querySelector('.card-front'); if (af) af.classList.remove('animate-glow-win', 'animate-glow-lose'); document.querySelectorAll('#playerCard .space-y-1 > *, #aiCard .space-y-1 > *').forEach(el => { el.classList.remove('bg-yellow-200', 'bg-gray-300'); });<br>            if (aiGame.playerCards.length === 0 || aiGame.aiCards.length === 0) { if(!document.getElementById('gameOverModal').classList.contains('hidden')) { document.getElementById('nextRoundButton').classList.add('hidden'); document.getElementById('resultDisplay').classList.add('hidden'); } else { endGameAI(); } return; }<br>            aiGame.currentPlayerCard = aiGame.playerCards[0]; aiGame.currentAiCard = aiGame.aiCards[0]; aiGame.roundInProgress = false;<br>            document.getElementById('nextRoundButton').classList.add('hidden'); document.getElementById('resultDisplay').classList.add('hidden');<br>            updateDisplayAI(); // Update counts and turn indicator first<br>            displayCardsAI(); // Show new cards<br>            if (aiGame.turn === 'ai') { document.getElementById('attributeSelection').classList.add('hidden'); aiSelectAttribute(); } // AI's turn<br>            else { document.getElementById('attributeSelection').classList.remove('hidden'); } // Player's turn<br>        }<br><br>        // --- Modified updateDisplayAI (adds turn indicator logic) ---<br>        function updateDisplayAI() {<br>            const playerCount = aiGame.playerCards.length; const opponentCount = aiGame.aiCards.length; document.getElementById('playerCards').textContent = playerCount; document.getElementById('aiCards').textContent = opponentCount; updateStatusBar(playerCount, opponentCount);<br>            const turnIndicator = document.getElementById('turnIndicator'); turnIndicator.classList.remove('hidden');<br>            if(aiGame.roundInProgress) { if (!document.getElementById('resultDisplay').classList.contains('hidden')) { turnIndicator.textContent = ''; } else if (aiGame.turn === 'ai') { turnIndicator.textContent = `Computer √ºberlegt...`; turnIndicator.className = 'text-sm font-semibold p-1 text-gray-500'; } else { turnIndicator.textContent = ''; } }<br>            else if (aiGame.turn === 'player') { turnIndicator.textContent = "Du bist am Zug!"; turnIndicator.className = 'text-sm font-semibold p-1 text-green-600'; }<br>            else { turnIndicator.textContent = `Computer ist am Zug...`; turnIndicator.className = 'text-sm font-semibold p-1 text-gray-500'; }<br>        }<br><br><br>        function checkGameOverAI() { /* ... checkGameOverAI unchanged ... */<br>             if (aiGame.roundInProgress) { if (aiGame.playerCards.length === 0 || aiGame.aiCards.length === 0) { setTimeout(endGameAI, 300); } }<br>        }<br><br>        // --- Modified triggerWinStarAnimation (added starWin sound) ---<br>        function triggerWinStarAnimation() {<br>             const animationContainer = document.getElementById('animationContainer');<br>             const playerScoreBox = document.getElementById('playerScoreBox');<br>             const statusBar = document.getElementById('statusBar');<br>             if (!animationContainer || !playerScoreBox || !statusBar) return;<br>             const startRect = statusBar.getBoundingClientRect();<br>             const endRect = playerScoreBox.getBoundingClientRect();<br>             const containerRect = animationContainer.getBoundingClientRect();<br>             const star = document.createElement('div');<br>             star.textContent = '‚≠ê';<br>             star.className = 'falling-star';<br>             const playerBarWidth = startRect.width * (parseFloat(statusBar.style.width) / 100);<br>             star.style.left = `${startRect.left - containerRect.left + (playerBarWidth / 2) - 20}px`;<br>             star.style.top = `${startRect.top - containerRect.top - 20}px`;<br>             const endY = (endRect.top + endRect.height / 2) - (startRect.top);<br>             star.style.setProperty('--end-y', `${endY}px`);<br>             animationContainer.appendChild(star);<br>             playSound(sounds.chime); // Play original chime<br>             playSound(sounds.starWin); // <<< PLAY STARWIN SOUND<br>             setTimeout(() => { star.remove(); }, 1200);<br>        }<br><br>        function endGame() { /* ... endGame unchanged ... */<br>             console.log(`Game ended. Mode: ${gameMode}`); if (gameMode === 'ai') { if (!document.getElementById('gameOverModal').classList.contains('hidden') || !document.getElementById('reflectionModal').classList.contains('hidden')){ /* Modal already shown */ } else { endGameAI(); } } else if (gameMode === 'multiplayer') { const finalPlayerCards = localGameState?.players?.[localPlayerId]?.cards?.length ?? 0; const opponentId = localGameState?.playerIds?.find(id => id !== localPlayerId); const finalOpponentCards = localGameState?.players?.[opponentId]?.cards?.length ?? 0; const playerWon = finalPlayerCards > finalOpponentCards; const isDraw = finalPlayerCards === 0 && finalOpponentCards === 0; if (isDraw) { showGameOverScreen(null); } else if (playerWon) { saveToLeaderboard(localGameState.players[localPlayerId].name); showReflectionOrWinScreen(); } else { showGameOverScreen(false); } } else { console.warn("endGame called without a valid gameMode set."); }<br>        }<br>        function endGameAI() { /* ... endGameAI unchanged ... */<br>            if (!document.getElementById('gameOverModal').classList.contains('hidden') || !document.getElementById('reflectionModal').classList.contains('hidden')) return; console.log("Calling endGameAI"); const playerWon = aiGame.playerCards.length > 0; if (playerWon) { saveToLeaderboard(aiGame.playerName); showReflectionOrWinScreen(); } else { showGameOverScreen(false); }<br>        }<br>         function showReflectionOrWinScreen() { /* ... showReflectionOrWinScreen unchanged ... */<br>             let qi = parseInt(localStorage.getItem('reflectionQuestionIndex') || '0'); document.getElementById('reflectionQuestion').textContent = reflectionQuestions[qi % reflectionQuestions.length]; document.getElementById('reflectionModal').classList.remove('hidden'); qi = (qi + 1); localStorage.setItem('reflectionQuestionIndex', qi.toString());<br>         }<br>        window.showFinalWinScreen = function() { /* ... showFinalWinScreen unchanged ... */<br>             document.getElementById('reflectionModal').classList.add('hidden'); document.getElementById('reflectionAnswer').value = ''; showGameOverScreen(true);<br>        };<br>         function showGameOverScreen(didPlayerWin) { /* ... showGameOverScreen unchanged ... */<br>             document.getElementById('reflectionModal').classList.add('hidden'); document.getElementById('leaderboardModal').classList.add('hidden'); const titleEl = document.getElementById('gameOverTitle'); const textEl = document.getElementById('gameOverText'); const modalEl = document.getElementById('gameOverModal'); if (didPlayerWin === true) { titleEl.textContent = 'üéâ Gl√ºckwunsch!'; titleEl.className = `text-3xl font-bold mb-3 text-green-600`; const winnerName = (gameMode === 'ai' ? aiGame.playerName : localGameState?.players?.[localPlayerId]?.name) || 'Du'; textEl.textContent = `Du hast gewonnen, ${winnerName}! Du hast alle Karten gesammelt.`; } else if (didPlayerWin === false) { titleEl.textContent = 'üòû Spiel verloren'; titleEl.className = `text-3xl font-bold mb-3 text-red-600`; const opponentName = (gameMode === 'ai' ? 'Die KI' : localGameState?.players?.[localGameState.playerIds?.find(id => id !== localPlayerId)]?.name) || 'Dein Gegner'; textEl.textContent = `${opponentName} hat gewonnen. Versuche es nochmal!`; } else { titleEl.textContent = 'ü§ù Unentschieden!'; titleEl.className = `text-3xl font-bold mb-3 text-yellow-600`; textEl.textContent = `Das Spiel endet unentschieden!`; } modalEl.classList.remove('hidden');<br>         }<br>        async function saveToLeaderboard(playerName) { /* ... saveToLeaderboard unchanged ... */<br>            if (!playerName) return; const safePlayerName = playerName.replace(/[.#$[\]]/g, '_'); const leaderboardRef = doc(db, "leaderboard", safePlayerName); try { await setDoc(leaderboardRef, { name: playerName, wins: increment(1), lastWin: serverTimestamp() }, { merge: true }); console.log(`Leaderboard updated for ${playerName}`); } catch (error) { console.error("Error updating leaderboard:", error); }<br>        }<br>        window.showLeaderboard = async function() { /* ... showLeaderboard unchanged ... */<br>             const list = document.getElementById('leaderboardList'); list.innerHTML = '<p class="text-gray-500 text-center">Lade Bestenliste...</p>'; document.getElementById('gameOverModal').classList.add('hidden'); document.getElementById('leaderboardModal').classList.remove('hidden'); try { const q = query(collection(db, "leaderboard"), orderBy("wins", "desc"), limit(10)); const querySnapshot = await getDocs(q); if (querySnapshot.empty) { list.innerHTML = '<p class="text-gray-500 text-center">Noch keine Eintr√§ge vorhanden.</p>'; return; } list.innerHTML = querySnapshot.docs.map((doc, index) => { const data = doc.data(); const safeName = (data.name || 'Unbekannt').replace(/</g, "&lt;").replace(/>/g, "&gt;"); return `<div class="flex justify-between items-center p-3 ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'} rounded-lg"><span class="font-semibold">${index + 1}. ${safeName}</span><span class="text-sm text-gray-600">${data.wins || 0} Siege</span></div>`; }).join(''); } catch (error) { console.error("Error fetching leaderboard:", error); list.innerHTML = '<p class="text-red-500 text-center">Fehler beim Laden der Bestenliste.</p>'; }<br>        };<br>        window.closeLeaderboard = function() { /* ... closeLeaderboard unchanged ... */<br>             document.getElementById('leaderboardModal').classList.add('hidden'); if (localGameState?.status === 'finished' || (gameMode === 'ai' && (aiGame.playerCards.length === 0 || aiGame.aiCards.length === 0))) { document.getElementById('gameOverModal').classList.remove('hidden'); } else if (document.getElementById('gameContainer').classList.contains('hidden')) { document.getElementById('setupModal').classList.remove('hidden'); } else { document.getElementById('setupModal').classList.remove('hidden'); }<br>        };<br>        window.resetGame = async function() { /* ... resetGame unchanged ... */<br>            console.log("Resetting game..."); if (unsubscribeGame) { unsubscribeGame(); unsubscribeGame = null; console.log("Unsubscribed from game changes."); } if (gameMode === 'multiplayer' && gameId && localGameState?.playerIds?.[0] === localPlayerId) { try { console.log(`Attempting to delete game ${gameId}...`); await deleteDoc(doc(db, "games", gameId)); console.log(`Game ${gameId} deleted.`); } catch (error) { console.error(`Error deleting game ${gameId}:`, error); } } else if (gameMode === 'multiplayer') { console.log("Not the host or no game ID, skipping game deletion."); } aiGame = { playerName: '', playerCards: [], aiCards: [], currentPlayerCard: null, currentAiCard: null, roundInProgress: false, turn: 'player' }; gameMode = null; gameId = null; localGameState = {}; hasCopiedShareLink = false; roundSoundPlayed = false; document.getElementById('gameOverModal').classList.add('hidden'); document.getElementById('leaderboardModal').classList.add('hidden'); document.getElementById('reflectionModal').classList.add('hidden'); document.getElementById('gameContainer').classList.add('hidden'); document.getElementById('multiplayerLobbyModal').classList.add('hidden'); document.getElementById('nameModal').classList.add('hidden'); document.getElementById('infoModal').classList.add('hidden'); document.getElementById('playerName').value = ''; document.getElementById('reflectionAnswer').value = ''; document.getElementById('shareLink').value = ''; document.getElementById('lobbyStatus').textContent = ''; document.getElementById('playerCard').innerHTML = ''; document.getElementById('aiCard').innerHTML = ''; updateStatusBar(0, 0); document.getElementById('setupModal').classList.remove('hidden'); window.history.pushState({}, document.title, window.location.pathname); console.log("Game reset complete.");<br>        };<br><br>        // ===== NEUE FUNKTION f√ºr Spielregeln =====<br>        window.showGameRules = function() {<br>            const modal = document.getElementById('infoModal');<br>            const titleEl = document.getElementById('infoModalTitle');<br>            const contentEl = document.getElementById('infoModalContent');<br><br>            titleEl.textContent = "Spielregeln & Info";<br><br>            contentEl.innerHTML = `<br>                <h3 class="text-lg font-bold text-amber-800 mb-2">Willkommen beim Holz-Quartett!</h3><br>                <p class="text-sm sm:text-base text-left mb-4"><br>                    Dies ist ein digitales Lernspiel, um auf spielerische Weise die Eigenschaften von 30 verschiedenen Holzarten kennenzulernen.<br>                </p><br>                <br>                <h4 class="text-md font-bold text-amber-700 mb-1 text-left">Spielziel</h4><br>                <p class="text-sm sm:text-base text-left mb-4"><br>                    Sammle alle 30 Karten deines Gegners!<br>                </p><br><br>                <h4 class="text-md font-bold text-amber-700 mb-1 text-left">Spielablauf (Supertrumpf)</h4><br>                <ul class="list-disc list-inside text-sm sm:text-base text-left space-y-1 mb-4"><br>                    <li>Jeder Spieler startet mit 15 Karten.</li><br>                    <li>Wer am Zug ist, w√§hlt eine Eigenschaft von der obersten Karte.</li><br>                    <li><strong>Wichtig:</strong> Bei 'Dauerhaftigkeit' und 'Quellen/Schw.' gewinnt der <strong>niedrigere</strong> Wert. Bei allen anderen Kategorien gewinnt der <strong>h√∂here</strong> Wert.</li><br>                    <li>Der Gewinner der Runde erh√§lt die Karte des Verlierers, legt beide unten in den eigenen Stapel und ist erneut am Zug.</li><br>                    <li>Bei einem Unentschieden behalten beide Spieler ihre Karte (sie wandert ans Ende ihres Stapels) und der Spieler, der die Runde begonnen hat, ist erneut am Zug.</li><br>                </ul><br><br>                <h4 class="text-md font-bold text-amber-700 mb-1 text-left">Lern-Funktionen</h4><br>                <ul class="list-disc list-inside text-sm sm:text-base text-left space-y-1"><br>                    <li>Klicke nach einem Zug auf das üí°-Symbol, um mehr √ºber die Holzart zu erfahren.</li><br>                    <li>Nach einem gewonnenen Spiel erh√§ltst du eine Reflexionsfrage, um dein Wissen anzuwenden.</li><br>                </ul><br>            `;<br><br>            modal.classList.remove('hidden');<br>        }<br><br>        window.showWoodInfo = function(woodName) { /* ... showWoodInfo unchanged ... */<br>            const modal = document.getElementById('infoModal'); const titleEl = document.getElementById('infoModalTitle'); const contentEl = document.getElementById('infoModalContent'); titleEl.textContent = `Wissenswertes √ºber ${woodName}`; const infoDataKey = Object.keys(woodInfo).find(key => key.toLowerCase() === woodName.toLowerCase()); const infoData = infoDataKey ? woodInfo[infoDataKey] : null; if (infoData) { contentEl.innerHTML = `<p class="text-left text-sm sm:text-base">${infoData.info || 'Keine Beschreibung verf√ºgbar.'}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"><div><h4 class="font-semibold mb-2 text-center text-sm sm:text-base">Baum</h4><img src="${infoData.bildBaum || ''}" alt="Bild von ${woodName} Baum" class="w-full max-h-48 sm:max-h-60 h-auto rounded-lg object-contain mx-auto border" onerror="this.parentElement.style.display='none';"></div><div><h4 class="font-semibold mb-2 text-center text-sm sm:text-base">Querschnitt</h4><img src="${infoData.bildQuerschnitt || ''}" alt="Bild von ${woodName} Querschnitt" class="w-full max-h-48 sm:max-h-60 h-auto rounded-lg object-contain mx-auto border" onerror="this.parentElement.style.display='none';"></div></div>`; } else { contentEl.innerHTML = "<p>F√ºr diese Holzart sind aktuell keine Detailinformationen verf√ºgbar.</p>"; } modal.classList.remove('hidden');<br>        };<br>        window.closeInfoModal = function() { /* ... closeInfoModal unchanged ... */<br>             document.getElementById('infoModal').classList.add('hidden');<br>        };<br><br>        // ===== Ton-Schalter Initialisierung und Event Listener =====<br>        const soundToggleButton = document.getElementById('soundToggle');<br><br>        // Initialen Status aus localStorage laden (oder default: nicht stumm)<br>        const savedMuteStatus = localStorage.getItem('holzquartett_isMuted');<br>        isMuted = savedMuteStatus === 'true'; // Setze globale Variable<br>        soundToggleButton.checked = !isMuted; // Setze Schalter-Zustand<br><br>        // Event Listener f√ºr den Schalter<br>        soundToggleButton.addEventListener('change', (event) => {<br>            isMuted = !event.target.checked; // Wenn checked, ist NICHT stumm<br>            localStorage.setItem('holzquartett_isMuted', isMuted); // Status speichern<br>            console.log("Ton ist", isMuted ? "AUS" : "AN");<br><br>            // Optional: Test-Sound abspielen, wenn Ton eingeschaltet wird<br>            if (!isMuted) {<br>                // Spiele einen kurzen Sound zur Best√§tigung, z.B. chime<br>                playSound(sounds.chime);<br>            }<br>        });<br><br>    </script><br></body><br></html></div>



